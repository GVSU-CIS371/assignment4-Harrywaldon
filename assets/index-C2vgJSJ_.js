(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ua(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},_r=[],Le=()=>{},mh=()=>!1,Ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ba=e=>e.startsWith("onUpdate:"),le=Object.assign,ja=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Bp=Object.prototype.hasOwnProperty,gt=(e,t)=>Bp.call(e,t),et=Array.isArray,yr=e=>Us(e)==="[object Map]",gh=e=>Us(e)==="[object Set]",Sc=e=>Us(e)==="[object Date]",it=e=>typeof e=="function",Bt=e=>typeof e=="string",Pe=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",_h=e=>(bt(e)||it(e))&&it(e.then)&&it(e.catch),yh=Object.prototype.toString,Us=e=>yh.call(e),jp=e=>Us(e).slice(8,-1),Eh=e=>Us(e)==="[object Object]",$a=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,hs=Ua(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zi=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},$p=/-\w/g,An=Zi(e=>e.replace($p,t=>t.slice(1).toUpperCase())),qp=/\B([A-Z])/g,Xn=Zi(e=>e.replace(qp,"-$1").toLowerCase()),Th=Zi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Fo=Zi(e=>e?`on${Th(e)}`:""),_n=(e,t)=>!Object.is(e,t),mi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},vh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ia=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Rc;const to=()=>Rc||(Rc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nr(e){if(et(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Bt(r)?Wp(r):Nr(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Bt(e)||bt(e))return e}const Hp=/;(?![^(]*\))/g,zp=/:([^]+)/,Kp=/\/\*[^]*?\*\//g;function Wp(e){const t={};return e.replace(Kp,"").split(Hp).forEach(n=>{if(n){const r=n.split(zp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function qa(e){let t="";if(Bt(e))t=e;else if(et(e))for(let n=0;n<e.length;n++){const r=qa(e[n]);r&&(t+=r+" ")}else if(bt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Gp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qp=Ua(Gp);function Ih(e){return!!e||e===""}function Xp(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Si(e[r],t[r]);return n}function Si(e,t){if(e===t)return!0;let n=Sc(e),r=Sc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Pe(e),r=Pe(t),n||r)return e===t;if(n=et(e),r=et(t),n||r)return n&&r?Xp(e,t):!1;if(n=bt(e),r=bt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!Si(e[a],t[a]))return!1}}return String(e)===String(t)}const wh=e=>!!(e&&e.__v_isRef===!0),hr=e=>Bt(e)?e:e==null?"":et(e)||bt(e)&&(e.toString===yh||!it(e.toString))?wh(e)?hr(e.value):JSON.stringify(e,Ah,2):String(e),Ah=(e,t)=>wh(t)?Ah(e,t.value):yr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Uo(r,i)+" =>"]=s,n),{})}:gh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Uo(n))}:Pe(t)?Uo(t):bt(t)&&!et(t)&&!Eh(t)?String(t):t,Uo=(e,t="")=>{var n;return Pe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let re;class bh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=re,!t&&re&&(this.index=(re.scopes||(re.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=re;try{return re=this,t()}finally{re=n}}}on(){++this._on===1&&(this.prevScope=re,re=this)}off(){this._on>0&&--this._on===0&&(re=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Sh(e){return new bh(e)}function Rh(){return re}function Yp(e,t=!1){re&&re.cleanups.push(e)}let At;const Bo=new WeakSet;class Ch{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,re&&re.active&&re.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bo.has(this)&&(Bo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Vh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Cc(this),Dh(this);const t=At,n=Ce;At=this,Ce=!0;try{return this.fn()}finally{xh(this),At=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ka(t);this.deps=this.depsTail=void 0,Cc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oa(this)&&this.run()}get dirty(){return oa(this)}}let Ph=0,fs,ds;function Vh(e,t=!1){if(e.flags|=8,t){e.next=ds,ds=e;return}e.next=fs,fs=e}function Ha(){Ph++}function za(){if(--Ph>0)return;if(ds){let t=ds;for(ds=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;fs;){let t=fs;for(fs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Dh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ka(r),Jp(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function oa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===As)||(e.globalVersion=As,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!oa(e))))return;e.flags|=2;const t=e.dep,n=At,r=Ce;At=e,Ce=!0;try{Dh(e);const s=e.fn(e._value);(t.version===0||_n(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{At=n,Ce=r,xh(e),e.flags&=-3}}function Ka(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ka(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Jp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const Oh=[];function Ye(){Oh.push(Ce),Ce=!1}function Je(){const e=Oh.pop();Ce=e===void 0?!0:e}function Cc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=At;At=void 0;try{t()}finally{At=n}}}let As=0;class Zp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!At||!Ce||At===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==At)n=this.activeLink=new Zp(At,this),At.deps?(n.prevDep=At.depsTail,At.depsTail.nextDep=n,At.depsTail=n):At.deps=At.depsTail=n,Mh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=At.depsTail,n.nextDep=void 0,At.depsTail.nextDep=n,At.depsTail=n,At.deps===n&&(At.deps=r)}return n}trigger(t){this.version++,As++,this.notify(t)}notify(t){Ha();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{za()}}}function Mh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Mh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ri=new WeakMap,zn=Symbol(""),aa=Symbol(""),bs=Symbol("");function ie(e,t,n){if(Ce&&At){let r=Ri.get(e);r||Ri.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Wa),s.map=r,s.key=n),s.track()}}function Ge(e,t,n,r,s,i){const a=Ri.get(e);if(!a){As++;return}const l=u=>{u&&u.trigger()};if(Ha(),t==="clear")a.forEach(l);else{const u=et(e),f=u&&$a(n);if(u&&n==="length"){const d=Number(r);a.forEach((m,T)=>{(T==="length"||T===bs||!Pe(T)&&T>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(bs)),t){case"add":u?f&&l(a.get("length")):(l(a.get(zn)),yr(e)&&l(a.get(aa)));break;case"delete":u||(l(a.get(zn)),yr(e)&&l(a.get(aa)));break;case"set":yr(e)&&l(a.get(zn));break}}za()}function tm(e,t){const n=Ri.get(e);return n&&n.get(t)}function lr(e){const t=pt(e);return t===e?t:(ie(t,"iterate",bs),Ae(e)?t:t.map(Yt))}function eo(e){return ie(e=pt(e),"iterate",bs),e}const em={__proto__:null,[Symbol.iterator](){return jo(this,Symbol.iterator,Yt)},concat(...e){return lr(this).concat(...e.map(t=>et(t)?lr(t):t))},entries(){return jo(this,"entries",e=>(e[1]=Yt(e[1]),e))},every(e,t){return Ke(this,"every",e,t,void 0,arguments)},filter(e,t){return Ke(this,"filter",e,t,n=>n.map(Yt),arguments)},find(e,t){return Ke(this,"find",e,t,Yt,arguments)},findIndex(e,t){return Ke(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ke(this,"findLast",e,t,Yt,arguments)},findLastIndex(e,t){return Ke(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ke(this,"forEach",e,t,void 0,arguments)},includes(...e){return $o(this,"includes",e)},indexOf(...e){return $o(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return $o(this,"lastIndexOf",e)},map(e,t){return Ke(this,"map",e,t,void 0,arguments)},pop(){return rs(this,"pop")},push(...e){return rs(this,"push",e)},reduce(e,...t){return Pc(this,"reduce",e,t)},reduceRight(e,...t){return Pc(this,"reduceRight",e,t)},shift(){return rs(this,"shift")},some(e,t){return Ke(this,"some",e,t,void 0,arguments)},splice(...e){return rs(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return rs(this,"unshift",e)},values(){return jo(this,"values",Yt)}};function jo(e,t,n){const r=eo(e),s=r[t]();return r!==e&&!Ae(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const nm=Array.prototype;function Ke(e,t,n,r,s,i){const a=eo(e),l=a!==e&&!Ae(e),u=a[t];if(u!==nm[t]){const m=u.apply(e,i);return l?Yt(m):m}let f=n;a!==e&&(l?f=function(m,T){return n.call(this,Yt(m),T,e)}:n.length>2&&(f=function(m,T){return n.call(this,m,T,e)}));const d=u.call(a,f,r);return l&&s?s(d):d}function Pc(e,t,n,r){const s=eo(e);let i=n;return s!==e&&(Ae(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,Yt(l),u,e)}),s[t](i,...r)}function $o(e,t,n){const r=pt(e);ie(r,"iterate",bs);const s=r[t](...n);return(s===-1||s===!1)&&Xa(n[0])?(n[0]=pt(n[0]),r[t](...n)):s}function rs(e,t,n=[]){Ye(),Ha();const r=pt(e)[t].apply(e,n);return za(),Je(),r}const rm=Ua("__proto__,__v_isRef,__isVue"),kh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pe));function sm(e){Pe(e)||(e=String(e));const t=pt(this);return ie(t,"has",e),t.hasOwnProperty(e)}class Lh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?pm:jh:i?Bh:Uh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=et(t);if(!s){let u;if(a&&(u=em[n]))return u;if(n==="hasOwnProperty")return sm}const l=Reflect.get(t,n,kt(t)?t:r);if((Pe(n)?kh.has(n):rm(n))||(s||ie(t,"get",n),i))return l;if(kt(l)){const u=a&&$a(n)?l:l.value;return s&&bt(u)?ca(u):u}return bt(l)?s?ca(l):no(l):l}}class Fh extends Lh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=bn(i);if(!Ae(r)&&!bn(r)&&(i=pt(i),r=pt(r)),!et(t)&&kt(i)&&!kt(r))return u||(i.value=r),!0}const a=et(t)&&$a(n)?Number(n)<t.length:gt(t,n),l=Reflect.set(t,n,r,kt(t)?t:s);return t===pt(s)&&(a?_n(r,i)&&Ge(t,"set",n,r):Ge(t,"add",n,r)),l}deleteProperty(t,n){const r=gt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ge(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pe(n)||!kh.has(n))&&ie(t,"has",n),r}ownKeys(t){return ie(t,"iterate",et(t)?"length":zn),Reflect.ownKeys(t)}}class im extends Lh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const om=new Fh,am=new im,lm=new Fh(!0);const la=e=>e,ii=e=>Reflect.getPrototypeOf(e);function cm(e,t,n){return function(...r){const s=this.__v_raw,i=pt(s),a=yr(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),d=n?la:t?Ci:Yt;return!t&&ie(i,"iterate",u?aa:zn),{next(){const{value:m,done:T}=f.next();return T?{value:m,done:T}:{value:l?[d(m[0]),d(m[1])]:d(m),done:T}},[Symbol.iterator](){return this}}}}function oi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function um(e,t){const n={get(s){const i=this.__v_raw,a=pt(i),l=pt(s);e||(_n(s,l)&&ie(a,"get",s),ie(a,"get",l));const{has:u}=ii(a),f=t?la:e?Ci:Yt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ie(pt(s),"iterate",zn),s.size},has(s){const i=this.__v_raw,a=pt(i),l=pt(s);return e||(_n(s,l)&&ie(a,"has",s),ie(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=pt(l),f=t?la:e?Ci:Yt;return!e&&ie(u,"iterate",zn),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return le(n,e?{add:oi("add"),set:oi("set"),delete:oi("delete"),clear:oi("clear")}:{add(s){!t&&!Ae(s)&&!bn(s)&&(s=pt(s));const i=pt(this);return ii(i).has.call(i,s)||(i.add(s),Ge(i,"add",s,s)),this},set(s,i){!t&&!Ae(i)&&!bn(i)&&(i=pt(i));const a=pt(this),{has:l,get:u}=ii(a);let f=l.call(a,s);f||(s=pt(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?_n(i,d)&&Ge(a,"set",s,i):Ge(a,"add",s,i),this},delete(s){const i=pt(this),{has:a,get:l}=ii(i);let u=a.call(i,s);u||(s=pt(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&Ge(i,"delete",s,void 0),f},clear(){const s=pt(this),i=s.size!==0,a=s.clear();return i&&Ge(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=cm(s,e,t)}),n}function Ga(e,t){const n=um(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(gt(n,s)&&s in r?n:r,s,i)}const hm={get:Ga(!1,!1)},fm={get:Ga(!1,!0)},dm={get:Ga(!0,!1)};const Uh=new WeakMap,Bh=new WeakMap,jh=new WeakMap,pm=new WeakMap;function mm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gm(e){return e.__v_skip||!Object.isExtensible(e)?0:mm(jp(e))}function no(e){return bn(e)?e:Qa(e,!1,om,hm,Uh)}function _m(e){return Qa(e,!1,lm,fm,Bh)}function ca(e){return Qa(e,!0,am,dm,jh)}function Qa(e,t,n,r,s){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=gm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function yn(e){return bn(e)?yn(e.__v_raw):!!(e&&e.__v_isReactive)}function bn(e){return!!(e&&e.__v_isReadonly)}function Ae(e){return!!(e&&e.__v_isShallow)}function Xa(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function Ya(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&vh(e,"__v_skip",!0),e}const Yt=e=>bt(e)?no(e):e,Ci=e=>bt(e)?ca(e):e;function kt(e){return e?e.__v_isRef===!0:!1}function Ja(e){return ym(e,!1)}function ym(e,t){return kt(e)?e:new Em(e,t)}class Em{constructor(t,n){this.dep=new Wa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:pt(t),this._value=n?t:Yt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ae(t)||bn(t);t=r?t:pt(t),_n(t,n)&&(this._rawValue=t,this._value=r?t:Yt(t),this.dep.trigger())}}function wt(e){return kt(e)?e.value:e}const Tm={get:(e,t,n)=>t==="__v_raw"?e:wt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return kt(s)&&!kt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function $h(e){return yn(e)?e:new Proxy(e,Tm)}function vm(e){const t=et(e)?new Array(e.length):{};for(const n in e)t[n]=wm(e,n);return t}class Im{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return tm(pt(this._object),this._key)}}function wm(e,t,n){const r=e[t];return kt(r)?r:new Im(e,t,n)}class Am{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Wa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=As-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return Vh(this,!0),!0}get value(){const t=this.dep.track();return Nh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function bm(e,t,n=!1){let r,s;return it(e)?r=e:(r=e.get,s=e.set),new Am(r,s,n)}const ai={},Pi=new WeakMap;let jn;function Sm(e,t=!1,n=jn){if(n){let r=Pi.get(n);r||Pi.set(n,r=[]),r.push(e)}}function Rm(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=z=>s?z:Ae(z)||s===!1||s===0?Qe(z,1):Qe(z);let d,m,T,S,O=!1,U=!1;if(kt(e)?(m=()=>e.value,O=Ae(e)):yn(e)?(m=()=>f(e),O=!0):et(e)?(U=!0,O=e.some(z=>yn(z)||Ae(z)),m=()=>e.map(z=>{if(kt(z))return z.value;if(yn(z))return f(z);if(it(z))return u?u(z,2):z()})):it(e)?t?m=u?()=>u(e,2):e:m=()=>{if(T){Ye();try{T()}finally{Je()}}const z=jn;jn=d;try{return u?u(e,3,[S]):e(S)}finally{jn=z}}:m=Le,t&&s){const z=m,rt=s===!0?1/0:s;m=()=>Qe(z(),rt)}const B=Rh(),K=()=>{d.stop(),B&&B.active&&ja(B.effects,d)};if(i&&t){const z=t;t=(...rt)=>{z(...rt),K()}}let W=U?new Array(e.length).fill(ai):ai;const Q=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const rt=d.run();if(s||O||(U?rt.some((yt,w)=>_n(yt,W[w])):_n(rt,W))){T&&T();const yt=jn;jn=d;try{const w=[rt,W===ai?void 0:U&&W[0]===ai?[]:W,S];W=rt,u?u(t,3,w):t(...w)}finally{jn=yt}}}else d.run()};return l&&l(Q),d=new Ch(m),d.scheduler=a?()=>a(Q,!1):Q,S=z=>Sm(z,!1,d),T=d.onStop=()=>{const z=Pi.get(d);if(z){if(u)u(z,4);else for(const rt of z)rt();Pi.delete(d)}},t?r?Q(!0):W=d.run():a?a(Q.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Qe(e,t=1/0,n){if(t<=0||!bt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,kt(e))Qe(e.value,t,n);else if(et(e))for(let r=0;r<e.length;r++)Qe(e[r],t,n);else if(gh(e)||yr(e))e.forEach(r=>{Qe(r,t,n)});else if(Eh(e)){for(const r in e)Qe(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Qe(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bs(e,t,n,r){try{return r?e(...r):e()}catch(s){ro(s,t,n)}}function $e(e,t,n,r){if(it(e)){const s=Bs(e,t,n,r);return s&&_h(s)&&s.catch(i=>{ro(i,t,n)}),s}if(et(e)){const s=[];for(let i=0;i<e.length;i++)s.push($e(e[i],t,n,r));return s}}function ro(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,u,f)===!1)return}l=l.parent}if(i){Ye(),Bs(i,null,10,[e,u,f]),Je();return}}Cm(e,n,s,r,a)}function Cm(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const he=[];let Oe=-1;const Er=[];let fn=null,fr=0;const qh=Promise.resolve();let Vi=null;function Hh(e){const t=Vi||qh;return e?t.then(this?e.bind(this):e):t}function Pm(e){let t=Oe+1,n=he.length;for(;t<n;){const r=t+n>>>1,s=he[r],i=Ss(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Za(e){if(!(e.flags&1)){const t=Ss(e),n=he[he.length-1];!n||!(e.flags&2)&&t>=Ss(n)?he.push(e):he.splice(Pm(t),0,e),e.flags|=1,zh()}}function zh(){Vi||(Vi=qh.then(Wh))}function Vm(e){et(e)?Er.push(...e):fn&&e.id===-1?fn.splice(fr+1,0,e):e.flags&1||(Er.push(e),e.flags|=1),zh()}function Vc(e,t,n=Oe+1){for(;n<he.length;n++){const r=he[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;he.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Kh(e){if(Er.length){const t=[...new Set(Er)].sort((n,r)=>Ss(n)-Ss(r));if(Er.length=0,fn){fn.push(...t);return}for(fn=t,fr=0;fr<fn.length;fr++){const n=fn[fr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fn=null,fr=0}}const Ss=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Wh(e){try{for(Oe=0;Oe<he.length;Oe++){const t=he[Oe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Bs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Oe<he.length;Oe++){const t=he[Oe];t&&(t.flags&=-2)}Oe=-1,he.length=0,Kh(),Vi=null,(he.length||Er.length)&&Wh()}}let ae=null,Gh=null;function Di(e){const t=ae;return ae=e,Gh=e&&e.type.__scopeId||null,t}function Se(e,t=ae,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Bc(-1);const i=Di(t);let a;try{a=e(...s)}finally{Di(i),r._d&&Bc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ss(e,t){if(ae===null)return e;const n=ao(ae),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=It]=t[s];i&&(it(i)&&(i={mounted:i,updated:i}),i.deep&&Qe(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function Un(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(Ye(),$e(u,n,8,[e.el,l,e,t]),Je())}}const Dm=Symbol("_vte"),xm=e=>e.__isTeleport,Nm=Symbol("_leaveCb");function tl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,tl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function js(e,t){return it(e)?le({name:e.name},t,{setup:e}):e}function Qh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xi=new WeakMap;function ps(e,t,n,r,s=!1){if(et(e)){e.forEach((O,U)=>ps(O,t&&(et(t)?t[U]:t),n,r,s));return}if(Tr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ps(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?ao(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,T=pt(m),S=m===It?mh:O=>gt(T,O);if(f!=null&&f!==u){if(Dc(t),Bt(f))d[f]=null,S(f)&&(m[f]=null);else if(kt(f)){f.value=null;const O=t;O.k&&(d[O.k]=null)}}if(it(u))Bs(u,l,12,[a,d]);else{const O=Bt(u),U=kt(u);if(O||U){const B=()=>{if(e.f){const K=O?S(u)?m[u]:d[u]:u.value;if(s)et(K)&&ja(K,i);else if(et(K))K.includes(i)||K.push(i);else if(O)d[u]=[i],S(u)&&(m[u]=d[u]);else{const W=[i];u.value=W,e.k&&(d[e.k]=W)}}else O?(d[u]=a,S(u)&&(m[u]=a)):U&&(u.value=a,e.k&&(d[e.k]=a))};if(a){const K=()=>{B(),xi.delete(e)};K.id=-1,xi.set(e,K),ye(K,n)}else Dc(e),B()}}}function Dc(e){const t=xi.get(e);t&&(t.flags|=8,xi.delete(e))}to().requestIdleCallback;to().cancelIdleCallback;const Tr=e=>!!e.type.__asyncLoader,Xh=e=>e.type.__isKeepAlive;function Om(e,t){Yh(e,"a",t)}function Mm(e,t){Yh(e,"da",t)}function Yh(e,t,n=fe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(so(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Xh(s.parent.vnode)&&km(r,t,n,s),s=s.parent}}function km(e,t,n,r){const s=so(t,e,r,!0);Jh(()=>{ja(r[t],s)},n)}function so(e,t,n=fe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ye();const l=$s(n),u=$e(t,n,e,a);return l(),Je(),u});return r?s.unshift(i):s.push(i),i}}const nn=e=>(t,n=fe)=>{(!Cs||e==="sp")&&so(e,(...r)=>t(...r),n)},Lm=nn("bm"),Fm=nn("m"),Um=nn("bu"),Bm=nn("u"),jm=nn("bum"),Jh=nn("um"),$m=nn("sp"),qm=nn("rtg"),Hm=nn("rtc");function zm(e,t=fe){so("ec",e,t)}const Km=Symbol.for("v-ndc");function mn(e,t,n,r){let s;const i=n,a=et(e);if(a||Bt(e)){const l=a&&yn(e);let u=!1,f=!1;l&&(u=!Ae(e),f=bn(e),e=eo(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(u?f?Ci(Yt(e[d])):Yt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(bt(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=t(e[d],d,u,i)}}else s=[];return s}function gi(e,t,n={},r,s){if(ae.ce||ae.parent&&Tr(ae.parent)&&ae.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),Tt(),dn(Mt,null,[$t("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),Tt();const a=i&&Zh(i(n)),l=n.key||a&&a.key,u=dn(Mt,{key:(l&&!Pe(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function Zh(e){return e.some(t=>rl(t)?!(t.type===Wn||t.type===Mt&&!Zh(t.children)):!0)?e:null}const ua=e=>e?vf(e)?ao(e):ua(e.parent):null,ms=le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ua(e.parent),$root:e=>ua(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ef(e),$forceUpdate:e=>e.f||(e.f=()=>{Za(e.update)}),$nextTick:e=>e.n||(e.n=Hh.bind(e.proxy)),$watch:e=>mg.bind(e)}),qo=(e,t)=>e!==It&&!e.__isScriptSetup&&gt(e,t),Wm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const S=a[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(qo(r,t))return a[t]=1,r[t];if(s!==It&&gt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&gt(f,t))return a[t]=3,i[t];if(n!==It&&gt(n,t))return a[t]=4,n[t];ha&&(a[t]=0)}}const d=ms[t];let m,T;if(d)return t==="$attrs"&&ie(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==It&&gt(n,t))return a[t]=4,n[t];if(T=u.config.globalProperties,gt(T,t))return T[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return qo(s,t)?(s[t]=n,!0):r!==It&&gt(r,t)?(r[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||e!==It&&l[0]!=="$"&&gt(e,l)||qo(t,l)||(u=i[0])&&gt(u,l)||gt(r,l)||gt(ms,l)||gt(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function xc(e){return et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ha=!0;function Gm(e){const t=ef(e),n=e.proxy,r=e.ctx;ha=!1,t.beforeCreate&&Nc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:m,mounted:T,beforeUpdate:S,updated:O,activated:U,deactivated:B,beforeDestroy:K,beforeUnmount:W,destroyed:Q,unmounted:z,render:rt,renderTracked:yt,renderTriggered:w,errorCaptured:g,serverPrefetch:_,expose:I,inheritAttrs:v,components:b,directives:y,filters:Lt}=t;if(f&&Qm(f,r,null),a)for(const at in a){const mt=a[at];it(mt)&&(r[at]=mt.bind(n))}if(s){const at=s.call(n,n);bt(at)&&(e.data=no(at))}if(ha=!0,i)for(const at in i){const mt=i[at],ve=it(mt)?mt.bind(n,n):it(mt.get)?mt.get.bind(n,n):Le,nr=!it(mt)&&it(mt.set)?mt.set.bind(n):Le,Ve=wf({get:ve,set:nr});Object.defineProperty(r,at,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:pe=>Ve.value=pe})}if(l)for(const at in l)tf(l[at],r,n,at);if(u){const at=it(u)?u.call(n):u;Reflect.ownKeys(at).forEach(mt=>{eg(mt,at[mt])})}d&&Nc(d,e,"c");function Pt(at,mt){et(mt)?mt.forEach(ve=>at(ve.bind(n))):mt&&at(mt.bind(n))}if(Pt(Lm,m),Pt(Fm,T),Pt(Um,S),Pt(Bm,O),Pt(Om,U),Pt(Mm,B),Pt(zm,g),Pt(Hm,yt),Pt(qm,w),Pt(jm,W),Pt(Jh,z),Pt($m,_),et(I))if(I.length){const at=e.exposed||(e.exposed={});I.forEach(mt=>{Object.defineProperty(at,mt,{get:()=>n[mt],set:ve=>n[mt]=ve,enumerable:!0})})}else e.exposed||(e.exposed={});rt&&e.render===Le&&(e.render=rt),v!=null&&(e.inheritAttrs=v),b&&(e.components=b),y&&(e.directives=y),_&&Qh(e)}function Qm(e,t,n=Le){et(e)&&(e=fa(e));for(const r in e){const s=e[r];let i;bt(s)?"default"in s?i=gs(s.from||r,s.default,!0):i=gs(s.from||r):i=gs(s),kt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Nc(e,t,n){$e(et(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function tf(e,t,n,r){let s=r.includes(".")?mf(n,r):()=>n[r];if(Bt(e)){const i=t[e];it(i)&&_i(s,i)}else if(it(e))_i(s,e.bind(n));else if(bt(e))if(et(e))e.forEach(i=>tf(i,t,n,r));else{const i=it(e.handler)?e.handler.bind(n):t[e.handler];it(i)&&_i(s,i,e)}}function ef(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>Ni(u,f,a,!0)),Ni(u,t,a)),bt(t)&&i.set(t,u),u}function Ni(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ni(e,i,n,!0),s&&s.forEach(a=>Ni(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=Xm[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Xm={data:Oc,props:Mc,emits:Mc,methods:os,computed:os,beforeCreate:ue,created:ue,beforeMount:ue,mounted:ue,beforeUpdate:ue,updated:ue,beforeDestroy:ue,beforeUnmount:ue,destroyed:ue,unmounted:ue,activated:ue,deactivated:ue,errorCaptured:ue,serverPrefetch:ue,components:os,directives:os,watch:Jm,provide:Oc,inject:Ym};function Oc(e,t){return t?e?function(){return le(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function Ym(e,t){return os(fa(e),fa(t))}function fa(e){if(et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ue(e,t){return e?[...new Set([].concat(e,t))]:t}function os(e,t){return e?le(Object.create(null),e,t):t}function Mc(e,t){return e?et(e)&&et(t)?[...new Set([...e,...t])]:le(Object.create(null),xc(e),xc(t??{})):t}function Jm(e,t){if(!e)return t;if(!t)return e;const n=le(Object.create(null),e);for(const r in t)n[r]=ue(e[r],t[r]);return n}function nf(){return{app:null,config:{isNativeTag:mh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zm=0;function tg(e,t){return function(r,s=null){it(r)||(r=le({},r)),s!=null&&!bt(s)&&(s=null);const i=nf(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:Zm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:kg,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&it(d.install)?(a.add(d),d.install(f,...m)):it(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,T){if(!u){const S=f._ceVNode||$t(r,s);return S.appContext=i,T===!0?T="svg":T===!1&&(T=void 0),e(S,d,T),u=!0,f._container=d,d.__vue_app__=f,ao(S.component)}},onUnmount(d){l.push(d)},unmount(){u&&($e(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=Kn;Kn=f;try{return d()}finally{Kn=m}}};return f}}let Kn=null;function eg(e,t){if(fe){let n=fe.provides;const r=fe.parent&&fe.parent.provides;r===n&&(n=fe.provides=Object.create(r)),n[e]=t}}function gs(e,t,n=!1){const r=Tf();if(r||Kn){let s=Kn?Kn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}function ng(){return!!(Tf()||Kn)}const rf={},sf=()=>Object.create(rf),of=e=>Object.getPrototypeOf(e)===rf;function rg(e,t,n,r=!1){const s={},i=sf();e.propsDefaults=Object.create(null),af(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:_m(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function sg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=pt(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let T=d[m];if(io(e.emitsOptions,T))continue;const S=t[T];if(u)if(gt(i,T))S!==i[T]&&(i[T]=S,f=!0);else{const O=An(T);s[O]=da(u,l,O,S,e,!1)}else S!==i[T]&&(i[T]=S,f=!0)}}}else{af(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!gt(t,m)&&((d=Xn(m))===m||!gt(t,d)))&&(u?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=da(u,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!gt(t,m))&&(delete i[m],f=!0)}f&&Ge(e.attrs,"set","")}function af(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(hs(u))continue;const f=t[u];let d;s&&gt(s,d=An(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:io(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=pt(n),f=l||It;for(let d=0;d<i.length;d++){const m=i[d];n[m]=da(s,u,m,f[m],e,!gt(f,m))}}return a}function da(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=gt(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&it(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=$s(s);r=f[n]=u.call(null,t),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Xn(n))&&(r=!0))}return r}const ig=new WeakMap;function lf(e,t,n=!1){const r=n?ig:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!it(e)){const d=m=>{u=!0;const[T,S]=lf(m,t,!0);le(a,T),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!u)return bt(e)&&r.set(e,_r),_r;if(et(i))for(let d=0;d<i.length;d++){const m=An(i[d]);kc(m)&&(a[m]=It)}else if(i)for(const d in i){const m=An(d);if(kc(m)){const T=i[d],S=a[m]=et(T)||it(T)?{type:T}:le({},T),O=S.type;let U=!1,B=!0;if(et(O))for(let K=0;K<O.length;++K){const W=O[K],Q=it(W)&&W.name;if(Q==="Boolean"){U=!0;break}else Q==="String"&&(B=!1)}else U=it(O)&&O.name==="Boolean";S[0]=U,S[1]=B,(U||gt(S,"default"))&&l.push(m)}}const f=[a,l];return bt(e)&&r.set(e,f),f}function kc(e){return e[0]!=="$"&&!hs(e)}const el=e=>e==="_"||e==="_ctx"||e==="$stable",nl=e=>et(e)?e.map(ke):[ke(e)],og=(e,t,n)=>{if(t._n)return t;const r=Se((...s)=>nl(t(...s)),n);return r._c=!1,r},cf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(el(s))continue;const i=e[s];if(it(i))t[s]=og(s,i,r);else if(i!=null){const a=nl(i);t[s]=()=>a}}},uf=(e,t)=>{const n=nl(t);e.slots.default=()=>n},hf=(e,t,n)=>{for(const r in t)(n||!el(r))&&(e[r]=t[r])},ag=(e,t,n)=>{const r=e.slots=sf();if(e.vnode.shapeFlag&32){const s=t._;s?(hf(r,t,n),n&&vh(r,"_",s,!0)):cf(t,r)}else t&&uf(e,t)},lg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:hf(s,t,n):(i=!t.$stable,cf(t,s)),a=t}else t&&(uf(e,t),a={default:1});if(i)for(const l in s)!el(l)&&a[l]==null&&delete s[l]},ye=wg;function cg(e){return ug(e)}function ug(e,t){const n=to();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:m,nextSibling:T,setScopeId:S=Le,insertStaticContent:O}=e,U=(E,A,P,F=null,D=null,N=null,$=void 0,L=null,M=!!A.dynamicChildren)=>{if(E===A)return;E&&!is(E,A)&&(F=rn(E),pe(E,D,N,!0),E=null),A.patchFlag===-2&&(M=!1,A.dynamicChildren=null);const{type:k,ref:J,shapeFlag:q}=A;switch(k){case oo:B(E,A,P,F);break;case Wn:K(E,A,P,F);break;case zo:E==null&&W(A,P,F,$);break;case Mt:b(E,A,P,F,D,N,$,L,M);break;default:q&1?rt(E,A,P,F,D,N,$,L,M):q&6?y(E,A,P,F,D,N,$,L,M):(q&64||q&128)&&k.process(E,A,P,F,D,N,$,L,M,Nn)}J!=null&&D?ps(J,E&&E.ref,N,A||E,!A):J==null&&E&&E.ref!=null&&ps(E.ref,null,N,E,!0)},B=(E,A,P,F)=>{if(E==null)r(A.el=l(A.children),P,F);else{const D=A.el=E.el;A.children!==E.children&&f(D,A.children)}},K=(E,A,P,F)=>{E==null?r(A.el=u(A.children||""),P,F):A.el=E.el},W=(E,A,P,F)=>{[E.el,E.anchor]=O(E.children,A,P,F,E.el,E.anchor)},Q=({el:E,anchor:A},P,F)=>{let D;for(;E&&E!==A;)D=T(E),r(E,P,F),E=D;r(A,P,F)},z=({el:E,anchor:A})=>{let P;for(;E&&E!==A;)P=T(E),s(E),E=P;s(A)},rt=(E,A,P,F,D,N,$,L,M)=>{A.type==="svg"?$="svg":A.type==="math"&&($="mathml"),E==null?yt(A,P,F,D,N,$,L,M):_(E,A,D,N,$,L,M)},yt=(E,A,P,F,D,N,$,L)=>{let M,k;const{props:J,shapeFlag:q,transition:X,dirs:Z}=E;if(M=E.el=a(E.type,N,J&&J.is,J),q&8?d(M,E.children):q&16&&g(E.children,M,null,F,D,Ho(E,N),$,L),Z&&Un(E,null,F,"created"),w(M,E,E.scopeId,$,F),J){for(const Et in J)Et!=="value"&&!hs(Et)&&i(M,Et,null,J[Et],N,F);"value"in J&&i(M,"value",null,J.value,N),(k=J.onVnodeBeforeMount)&&Ne(k,F,E)}Z&&Un(E,null,F,"beforeMount");const lt=hg(D,X);lt&&X.beforeEnter(M),r(M,A,P),((k=J&&J.onVnodeMounted)||lt||Z)&&ye(()=>{k&&Ne(k,F,E),lt&&X.enter(M),Z&&Un(E,null,F,"mounted")},D)},w=(E,A,P,F,D)=>{if(P&&S(E,P),F)for(let N=0;N<F.length;N++)S(E,F[N]);if(D){let N=D.subTree;if(A===N||_f(N.type)&&(N.ssContent===A||N.ssFallback===A)){const $=D.vnode;w(E,$,$.scopeId,$.slotScopeIds,D.parent)}}},g=(E,A,P,F,D,N,$,L,M=0)=>{for(let k=M;k<E.length;k++){const J=E[k]=L?pn(E[k]):ke(E[k]);U(null,J,A,P,F,D,N,$,L)}},_=(E,A,P,F,D,N,$)=>{const L=A.el=E.el;let{patchFlag:M,dynamicChildren:k,dirs:J}=A;M|=E.patchFlag&16;const q=E.props||It,X=A.props||It;let Z;if(P&&Bn(P,!1),(Z=X.onVnodeBeforeUpdate)&&Ne(Z,P,A,E),J&&Un(A,E,P,"beforeUpdate"),P&&Bn(P,!0),(q.innerHTML&&X.innerHTML==null||q.textContent&&X.textContent==null)&&d(L,""),k?I(E.dynamicChildren,k,L,P,F,Ho(A,D),N):$||mt(E,A,L,null,P,F,Ho(A,D),N,!1),M>0){if(M&16)v(L,q,X,P,D);else if(M&2&&q.class!==X.class&&i(L,"class",null,X.class,D),M&4&&i(L,"style",q.style,X.style,D),M&8){const lt=A.dynamicProps;for(let Et=0;Et<lt.length;Et++){const dt=lt[Et],te=q[dt],ee=X[dt];(ee!==te||dt==="value")&&i(L,dt,te,ee,D,P)}}M&1&&E.children!==A.children&&d(L,A.children)}else!$&&k==null&&v(L,q,X,P,D);((Z=X.onVnodeUpdated)||J)&&ye(()=>{Z&&Ne(Z,P,A,E),J&&Un(A,E,P,"updated")},F)},I=(E,A,P,F,D,N,$)=>{for(let L=0;L<A.length;L++){const M=E[L],k=A[L],J=M.el&&(M.type===Mt||!is(M,k)||M.shapeFlag&198)?m(M.el):P;U(M,k,J,null,F,D,N,$,!0)}},v=(E,A,P,F,D)=>{if(A!==P){if(A!==It)for(const N in A)!hs(N)&&!(N in P)&&i(E,N,A[N],null,D,F);for(const N in P){if(hs(N))continue;const $=P[N],L=A[N];$!==L&&N!=="value"&&i(E,N,L,$,D,F)}"value"in P&&i(E,"value",A.value,P.value,D)}},b=(E,A,P,F,D,N,$,L,M)=>{const k=A.el=E?E.el:l(""),J=A.anchor=E?E.anchor:l("");let{patchFlag:q,dynamicChildren:X,slotScopeIds:Z}=A;Z&&(L=L?L.concat(Z):Z),E==null?(r(k,P,F),r(J,P,F),g(A.children||[],P,J,D,N,$,L,M)):q>0&&q&64&&X&&E.dynamicChildren?(I(E.dynamicChildren,X,P,D,N,$,L),(A.key!=null||D&&A===D.subTree)&&ff(E,A,!0)):mt(E,A,P,J,D,N,$,L,M)},y=(E,A,P,F,D,N,$,L,M)=>{A.slotScopeIds=L,E==null?A.shapeFlag&512?D.ctx.activate(A,P,F,$,M):Lt(A,P,F,D,N,$,M):Te(E,A,M)},Lt=(E,A,P,F,D,N,$)=>{const L=E.component=Vg(E,F,D);if(Xh(E)&&(L.ctx.renderer=Nn),Dg(L,!1,$),L.asyncDep){if(D&&D.registerDep(L,Pt,$),!E.el){const M=L.subTree=$t(Wn);K(null,M,A,P),E.placeholder=M.el}}else Pt(L,E,A,P,D,N,$)},Te=(E,A,P)=>{const F=A.component=E.component;if(vg(E,A,P))if(F.asyncDep&&!F.asyncResolved){at(F,A,P);return}else F.next=A,F.update();else A.el=E.el,F.vnode=A},Pt=(E,A,P,F,D,N,$)=>{const L=()=>{if(E.isMounted){let{next:q,bu:X,u:Z,parent:lt,vnode:Et}=E;{const ge=df(E);if(ge){q&&(q.el=Et.el,at(E,q,$)),ge.asyncDep.then(()=>{E.isUnmounted||L()});return}}let dt=q,te;Bn(E,!1),q?(q.el=Et.el,at(E,q,$)):q=Et,X&&mi(X),(te=q.props&&q.props.onVnodeBeforeUpdate)&&Ne(te,lt,q,Et),Bn(E,!0);const ee=Fc(E),me=E.subTree;E.subTree=ee,U(me,ee,m(me.el),rn(me),E,D,N),q.el=ee.el,dt===null&&Ig(E,ee.el),Z&&ye(Z,D),(te=q.props&&q.props.onVnodeUpdated)&&ye(()=>Ne(te,lt,q,Et),D)}else{let q;const{el:X,props:Z}=A,{bm:lt,m:Et,parent:dt,root:te,type:ee}=E,me=Tr(A);Bn(E,!1),lt&&mi(lt),!me&&(q=Z&&Z.onVnodeBeforeMount)&&Ne(q,dt,A),Bn(E,!0);{te.ce&&te.ce._def.shadowRoot!==!1&&te.ce._injectChildStyle(ee);const ge=E.subTree=Fc(E);U(null,ge,P,F,E,D,N),A.el=ge.el}if(Et&&ye(Et,D),!me&&(q=Z&&Z.onVnodeMounted)){const ge=A;ye(()=>Ne(q,dt,ge),D)}(A.shapeFlag&256||dt&&Tr(dt.vnode)&&dt.vnode.shapeFlag&256)&&E.a&&ye(E.a,D),E.isMounted=!0,A=P=F=null}};E.scope.on();const M=E.effect=new Ch(L);E.scope.off();const k=E.update=M.run.bind(M),J=E.job=M.runIfDirty.bind(M);J.i=E,J.id=E.uid,M.scheduler=()=>Za(J),Bn(E,!0),k()},at=(E,A,P)=>{A.component=E;const F=E.vnode.props;E.vnode=A,E.next=null,sg(E,A.props,F,P),lg(E,A.children,P),Ye(),Vc(E),Je()},mt=(E,A,P,F,D,N,$,L,M=!1)=>{const k=E&&E.children,J=E?E.shapeFlag:0,q=A.children,{patchFlag:X,shapeFlag:Z}=A;if(X>0){if(X&128){nr(k,q,P,F,D,N,$,L,M);return}else if(X&256){ve(k,q,P,F,D,N,$,L,M);return}}Z&8?(J&16&&ze(k,D,N),q!==k&&d(P,q)):J&16?Z&16?nr(k,q,P,F,D,N,$,L,M):ze(k,D,N,!0):(J&8&&d(P,""),Z&16&&g(q,P,F,D,N,$,L,M))},ve=(E,A,P,F,D,N,$,L,M)=>{E=E||_r,A=A||_r;const k=E.length,J=A.length,q=Math.min(k,J);let X;for(X=0;X<q;X++){const Z=A[X]=M?pn(A[X]):ke(A[X]);U(E[X],Z,P,null,D,N,$,L,M)}k>J?ze(E,D,N,!0,!1,q):g(A,P,F,D,N,$,L,M,q)},nr=(E,A,P,F,D,N,$,L,M)=>{let k=0;const J=A.length;let q=E.length-1,X=J-1;for(;k<=q&&k<=X;){const Z=E[k],lt=A[k]=M?pn(A[k]):ke(A[k]);if(is(Z,lt))U(Z,lt,P,null,D,N,$,L,M);else break;k++}for(;k<=q&&k<=X;){const Z=E[q],lt=A[X]=M?pn(A[X]):ke(A[X]);if(is(Z,lt))U(Z,lt,P,null,D,N,$,L,M);else break;q--,X--}if(k>q){if(k<=X){const Z=X+1,lt=Z<J?A[Z].el:F;for(;k<=X;)U(null,A[k]=M?pn(A[k]):ke(A[k]),P,lt,D,N,$,L,M),k++}}else if(k>X)for(;k<=q;)pe(E[k],D,N,!0),k++;else{const Z=k,lt=k,Et=new Map;for(k=lt;k<=X;k++){const Qt=A[k]=M?pn(A[k]):ke(A[k]);Qt.key!=null&&Et.set(Qt.key,k)}let dt,te=0;const ee=X-lt+1;let me=!1,ge=0;const be=new Array(ee);for(k=0;k<ee;k++)be[k]=0;for(k=Z;k<=q;k++){const Qt=E[k];if(te>=ee){pe(Qt,D,N,!0);continue}let zt;if(Qt.key!=null)zt=Et.get(Qt.key);else for(dt=lt;dt<=X;dt++)if(be[dt-lt]===0&&is(Qt,A[dt])){zt=dt;break}zt===void 0?pe(Qt,D,N,!0):(be[zt-lt]=k+1,zt>=ge?ge=zt:me=!0,U(Qt,A[zt],P,null,D,N,$,L,M),te++)}const sr=me?fg(be):_r;for(dt=sr.length-1,k=ee-1;k>=0;k--){const Qt=lt+k,zt=A[Qt],$r=A[Qt+1],On=Qt+1<J?$r.el||$r.placeholder:F;be[k]===0?U(null,zt,P,On,D,N,$,L,M):me&&(dt<0||k!==sr[dt]?Ve(zt,P,On,2):dt--)}}},Ve=(E,A,P,F,D=null)=>{const{el:N,type:$,transition:L,children:M,shapeFlag:k}=E;if(k&6){Ve(E.component.subTree,A,P,F);return}if(k&128){E.suspense.move(A,P,F);return}if(k&64){$.move(E,A,P,Nn);return}if($===Mt){r(N,A,P);for(let q=0;q<M.length;q++)Ve(M[q],A,P,F);r(E.anchor,A,P);return}if($===zo){Q(E,A,P);return}if(F!==2&&k&1&&L)if(F===0)L.beforeEnter(N),r(N,A,P),ye(()=>L.enter(N),D);else{const{leave:q,delayLeave:X,afterLeave:Z}=L,lt=()=>{E.ctx.isUnmounted?s(N):r(N,A,P)},Et=()=>{N._isLeaving&&N[Nm](!0),q(N,()=>{lt(),Z&&Z()})};X?X(N,lt,Et):Et()}else r(N,A,P)},pe=(E,A,P,F=!1,D=!1)=>{const{type:N,props:$,ref:L,children:M,dynamicChildren:k,shapeFlag:J,patchFlag:q,dirs:X,cacheIndex:Z}=E;if(q===-2&&(D=!1),L!=null&&(Ye(),ps(L,null,P,E,!0),Je()),Z!=null&&(A.renderCache[Z]=void 0),J&256){A.ctx.deactivate(E);return}const lt=J&1&&X,Et=!Tr(E);let dt;if(Et&&(dt=$&&$.onVnodeBeforeUnmount)&&Ne(dt,A,E),J&6)Br(E.component,P,F);else{if(J&128){E.suspense.unmount(P,F);return}lt&&Un(E,null,A,"beforeUnmount"),J&64?E.type.remove(E,A,P,Nn,F):k&&!k.hasOnce&&(N!==Mt||q>0&&q&64)?ze(k,A,P,!1,!0):(N===Mt&&q&384||!D&&J&16)&&ze(M,A,P),F&&Ur(E)}(Et&&(dt=$&&$.onVnodeUnmounted)||lt)&&ye(()=>{dt&&Ne(dt,A,E),lt&&Un(E,null,A,"unmounted")},P)},Ur=E=>{const{type:A,el:P,anchor:F,transition:D}=E;if(A===Mt){rr(P,F);return}if(A===zo){z(E);return}const N=()=>{s(P),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(E.shapeFlag&1&&D&&!D.persisted){const{leave:$,delayLeave:L}=D,M=()=>$(P,N);L?L(E.el,N,M):M()}else N()},rr=(E,A)=>{let P;for(;E!==A;)P=T(E),s(E),E=P;s(A)},Br=(E,A,P)=>{const{bum:F,scope:D,job:N,subTree:$,um:L,m:M,a:k}=E;Lc(M),Lc(k),F&&mi(F),D.stop(),N&&(N.flags|=8,pe($,E,A,P)),L&&ye(L,A),ye(()=>{E.isUnmounted=!0},A)},ze=(E,A,P,F=!1,D=!1,N=0)=>{for(let $=N;$<E.length;$++)pe(E[$],A,P,F,D)},rn=E=>{if(E.shapeFlag&6)return rn(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const A=T(E.anchor||E.el),P=A&&A[Dm];return P?T(P):A};let xn=!1;const jr=(E,A,P)=>{E==null?A._vnode&&pe(A._vnode,null,null,!0):U(A._vnode||null,E,A,null,null,null,P),A._vnode=E,xn||(xn=!0,Vc(),Kh(),xn=!1)},Nn={p:U,um:pe,m:Ve,r:Ur,mt:Lt,mc:g,pc:mt,pbc:I,n:rn,o:e};return{render:jr,hydrate:void 0,createApp:tg(jr)}}function Ho({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function hg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ff(e,t,n=!1){const r=e.children,s=t.children;if(et(r)&&et(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=pn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&ff(a,l)),l.type===oo&&l.patchFlag!==-1&&(l.el=a.el),l.type===Wn&&!l.el&&(l.el=a.el)}}function fg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function df(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:df(t)}function Lc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const dg=Symbol.for("v-scx"),pg=()=>gs(dg);function _i(e,t,n){return pf(e,t,n)}function pf(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=le({},n),u=t&&r||!t&&i!=="post";let f;if(Cs){if(i==="sync"){const S=pg();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!u){const S=()=>{};return S.stop=Le,S.resume=Le,S.pause=Le,S}}const d=fe;l.call=(S,O,U)=>$e(S,d,O,U);let m=!1;i==="post"?l.scheduler=S=>{ye(S,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(S,O)=>{O?S():Za(S)}),l.augmentJob=S=>{t&&(S.flags|=4),m&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const T=Rm(e,t,l);return Cs&&(f?f.push(T):u&&T()),T}function mg(e,t,n){const r=this.proxy,s=Bt(e)?e.includes(".")?mf(r,e):()=>r[e]:e.bind(r,r);let i;it(t)?i=t:(i=t.handler,n=t);const a=$s(this),l=pf(s,i.bind(r),n);return a(),l}function mf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const gg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${An(t)}Modifiers`]||e[`${Xn(t)}Modifiers`];function _g(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&gg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Bt(d)?d.trim():d)),a.number&&(s=n.map(ia)));let l,u=r[l=Fo(t)]||r[l=Fo(An(t))];!u&&i&&(u=r[l=Fo(Xn(t))]),u&&$e(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,$e(f,e,6,s)}}const yg=new WeakMap;function gf(e,t,n=!1){const r=n?yg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!it(e)){const u=f=>{const d=gf(f,t,!0);d&&(l=!0,le(a,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(bt(e)&&r.set(e,null),null):(et(i)?i.forEach(u=>a[u]=null):le(a,i),bt(e)&&r.set(e,a),a)}function io(e,t){return!e||!Ji(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Xn(t))||gt(e,t))}function Fc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:m,data:T,setupState:S,ctx:O,inheritAttrs:U}=e,B=Di(e);let K,W;try{if(n.shapeFlag&4){const z=s||r,rt=z;K=ke(f.call(rt,z,d,m,S,T,O)),W=l}else{const z=t;K=ke(z.length>1?z(m,{attrs:l,slots:a,emit:u}):z(m,null)),W=t.props?l:Eg(l)}}catch(z){_s.length=0,ro(z,e,1),K=$t(Wn)}let Q=K;if(W&&U!==!1){const z=Object.keys(W),{shapeFlag:rt}=Q;z.length&&rt&7&&(i&&z.some(Ba)&&(W=Tg(W,i)),Q=Sr(Q,W,!1,!0))}return n.dirs&&(Q=Sr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&tl(Q,n.transition),K=Q,Di(B),K}const Eg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ji(n))&&((t||(t={}))[n]=e[n]);return t},Tg=(e,t)=>{const n={};for(const r in e)(!Ba(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function vg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Uc(r,a,f):!!a;if(u&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const T=d[m];if(a[T]!==r[T]&&!io(f,T))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Uc(r,a,f):!0:!!a;return!1}function Uc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!io(n,i))return!0}return!1}function Ig({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const _f=e=>e.__isSuspense;function wg(e,t){t&&t.pendingBranch?et(e)?t.effects.push(...e):t.effects.push(e):Vm(e)}const Mt=Symbol.for("v-fgt"),oo=Symbol.for("v-txt"),Wn=Symbol.for("v-cmt"),zo=Symbol.for("v-stc"),_s=[];let Ee=null;function Tt(e=!1){_s.push(Ee=e?null:[])}function Ag(){_s.pop(),Ee=_s[_s.length-1]||null}let Rs=1;function Bc(e,t=!1){Rs+=e,e<0&&Ee&&t&&(Ee.hasOnce=!0)}function yf(e){return e.dynamicChildren=Rs>0?Ee||_r:null,Ag(),Rs>0&&Ee&&Ee.push(e),e}function Nt(e,t,n,r,s,i){return yf(xt(e,t,n,r,s,i,!0))}function dn(e,t,n,r,s){return yf($t(e,t,n,r,s,!0))}function rl(e){return e?e.__v_isVNode===!0:!1}function is(e,t){return e.type===t.type&&e.key===t.key}const Ef=({key:e})=>e??null,yi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||kt(e)||it(e)?{i:ae,r:e,k:t,f:!!n}:e:null);function xt(e,t=null,n=null,r=0,s=null,i=e===Mt?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ef(t),ref:t&&yi(t),scopeId:Gh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ae};return l?(sl(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Bt(n)?8:16),Rs>0&&!a&&Ee&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Ee.push(u),u}const $t=bg;function bg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Km)&&(e=Wn),rl(e)){const l=Sr(e,t,!0);return n&&sl(l,n),Rs>0&&!i&&Ee&&(l.shapeFlag&6?Ee[Ee.indexOf(e)]=l:Ee.push(l)),l.patchFlag=-2,l}if(Mg(e)&&(e=e.__vccOpts),t){t=Sg(t);let{class:l,style:u}=t;l&&!Bt(l)&&(t.class=qa(l)),bt(u)&&(Xa(u)&&!et(u)&&(u=le({},u)),t.style=Nr(u))}const a=Bt(e)?1:_f(e)?128:xm(e)?64:bt(e)?4:it(e)?2:0;return xt(e,t,n,r,s,a,i,!0)}function Sg(e){return e?Xa(e)||of(e)?le({},e):e:null}function Sr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?Rg(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Ef(f),ref:t&&t.ref?n&&i?et(i)?i.concat(yi(t)):[i,yi(t)]:yi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Mt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Sr(e.ssContent),ssFallback:e.ssFallback&&Sr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&tl(d,u.clone(d)),d}function as(e=" ",t=0){return $t(oo,null,e,t)}function ke(e){return e==null||typeof e=="boolean"?$t(Wn):et(e)?$t(Mt,null,e.slice()):rl(e)?pn(e):$t(oo,null,String(e))}function pn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Sr(e)}function sl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(et(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),sl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!of(t)?t._ctx=ae:s===3&&ae&&(ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:ae},n=32):(t=String(t),r&64?(n=16,t=[as(t)]):n=8);e.children=t,e.shapeFlag|=n}function Rg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=qa([t.class,r.class]));else if(s==="style")t.style=Nr([t.style,r.style]);else if(Ji(s)){const i=t[s],a=r[s];a&&i!==a&&!(et(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Ne(e,t,n,r=null){$e(e,t,7,[n,r])}const Cg=nf();let Pg=0;function Vg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Cg,i={uid:Pg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lf(r,s),emitsOptions:gf(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=_g.bind(null,i),e.ce&&e.ce(i),i}let fe=null;const Tf=()=>fe||ae;let Oi,pa;{const e=to(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Oi=t("__VUE_INSTANCE_SETTERS__",n=>fe=n),pa=t("__VUE_SSR_SETTERS__",n=>Cs=n)}const $s=e=>{const t=fe;return Oi(e),e.scope.on(),()=>{e.scope.off(),Oi(t)}},jc=()=>{fe&&fe.scope.off(),Oi(null)};function vf(e){return e.vnode.shapeFlag&4}let Cs=!1;function Dg(e,t=!1,n=!1){t&&pa(t);const{props:r,children:s}=e.vnode,i=vf(e);rg(e,r,i,t),ag(e,s,n||t);const a=i?xg(e,t):void 0;return t&&pa(!1),a}function xg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Wm);const{setup:r}=n;if(r){Ye();const s=e.setupContext=r.length>1?Og(e):null,i=$s(e),a=Bs(r,e,0,[e.props,s]),l=_h(a);if(Je(),i(),(l||e.sp)&&!Tr(e)&&Qh(e),l){if(a.then(jc,jc),t)return a.then(u=>{$c(e,u)}).catch(u=>{ro(u,e,0)});e.asyncDep=a}else $c(e,a)}else If(e)}function $c(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=$h(t)),If(e)}function If(e,t,n){const r=e.type;e.render||(e.render=r.render||Le);{const s=$s(e);Ye();try{Gm(e)}finally{Je(),s()}}}const Ng={get(e,t){return ie(e,"get",""),e[t]}};function Og(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Ng),slots:e.slots,emit:e.emit,expose:t}}function ao(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy($h(Ya(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ms)return ms[n](e)},has(t,n){return n in t||n in ms}})):e.proxy}function Mg(e){return it(e)&&"__vccOpts"in e}const wf=(e,t)=>bm(e,t,Cs),kg="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ma;const qc=typeof window<"u"&&window.trustedTypes;if(qc)try{ma=qc.createPolicy("vue",{createHTML:e=>e})}catch{}const Af=ma?e=>ma.createHTML(e):e=>e,Lg="http://www.w3.org/2000/svg",Fg="http://www.w3.org/1998/Math/MathML",We=typeof document<"u"?document:null,Hc=We&&We.createElement("template"),Ug={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?We.createElementNS(Lg,e):t==="mathml"?We.createElementNS(Fg,e):n?We.createElement(e,{is:n}):We.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>We.createTextNode(e),createComment:e=>We.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>We.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Hc.innerHTML=Af(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Hc.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Bg=Symbol("_vtc");function jg(e,t,n){const r=e[Bg];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const zc=Symbol("_vod"),$g=Symbol("_vsh"),qg=Symbol(""),Hg=/(?:^|;)\s*display\s*:/;function zg(e,t,n){const r=e.style,s=Bt(n);let i=!1;if(n&&!s){if(t)if(Bt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ei(r,l,"")}else for(const a in t)n[a]==null&&Ei(r,a,"");for(const a in n)a==="display"&&(i=!0),Ei(r,a,n[a])}else if(s){if(t!==n){const a=r[qg];a&&(n+=";"+a),r.cssText=n,i=Hg.test(n)}}else t&&e.removeAttribute("style");zc in e&&(e[zc]=i?r.display:"",e[$g]&&(r.display="none"))}const Kc=/\s*!important$/;function Ei(e,t,n){if(et(n))n.forEach(r=>Ei(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Kg(e,t);Kc.test(n)?e.setProperty(Xn(r),n.replace(Kc,""),"important"):e[r]=n}}const Wc=["Webkit","Moz","ms"],Ko={};function Kg(e,t){const n=Ko[t];if(n)return n;let r=An(t);if(r!=="filter"&&r in e)return Ko[t]=r;r=Th(r);for(let s=0;s<Wc.length;s++){const i=Wc[s]+r;if(i in e)return Ko[t]=i}return t}const Gc="http://www.w3.org/1999/xlink";function Qc(e,t,n,r,s,i=Qp(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Gc,t.slice(6,t.length)):e.setAttributeNS(Gc,t,n):n==null||i&&!Ih(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Pe(n)?String(n):n)}function Xc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Af(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Ih(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function qn(e,t,n,r){e.addEventListener(t,n,r)}function Wg(e,t,n,r){e.removeEventListener(t,n,r)}const Yc=Symbol("_vei");function Gg(e,t,n,r,s=null){const i=e[Yc]||(e[Yc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=Qg(t);if(r){const f=i[t]=Jg(r,s);qn(e,l,f,u)}else a&&(Wg(e,l,a,u),i[t]=void 0)}}const Jc=/(?:Once|Passive|Capture)$/;function Qg(e){let t;if(Jc.test(e)){t={};let r;for(;r=e.match(Jc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xn(e.slice(2)),t]}let Wo=0;const Xg=Promise.resolve(),Yg=()=>Wo||(Xg.then(()=>Wo=0),Wo=Date.now());function Jg(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$e(Zg(r,n.value),t,5,[r])};return n.value=e,n.attached=Yg(),n}function Zg(e,t){if(et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Zc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,t_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?jg(e,r,a):t==="style"?zg(e,n,r):Ji(t)?Ba(t)||Gg(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):e_(e,t,r,a))?(Xc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Qc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(r))?Xc(e,An(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Qc(e,t,r,a))};function e_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Zc(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Zc(t)&&Bt(n)?!1:t in e}const Mi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return et(t)?n=>mi(t,n):t};function n_(e){e.target.composing=!0}function tu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vr=Symbol("_assign"),r_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[vr]=Mi(s);const i=r||s.props&&s.props.type==="number";qn(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=ia(l)),e[vr](l)}),n&&qn(e,"change",()=>{e.value=e.value.trim()}),t||(qn(e,"compositionstart",n_),qn(e,"compositionend",tu),qn(e,"change",tu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[vr]=Mi(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?ia(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},li={created(e,{value:t},n){e.checked=Si(t,n.props.value),e[vr]=Mi(n),qn(e,"change",()=>{e[vr](s_(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[vr]=Mi(r),t!==n&&(e.checked=Si(t,r.props.value))}};function s_(e){return"_value"in e?e._value:e.value}const i_=le({patchProp:t_},Ug);let eu;function o_(){return eu||(eu=cg(i_))}const a_=((...e)=>{const t=o_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=c_(r);if(!s)return;const i=t._component;!it(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,l_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function l_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function c_(e){return Bt(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let bf;const lo=e=>bf=e,Sf=Symbol();function ga(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ys;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ys||(ys={}));function u_(){const e=Sh(!0),t=e.run(()=>Ja({}));let n=[],r=[];const s=Ya({install(i){lo(s),s._a=i,i.provide(Sf,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Rf=()=>{};function nu(e,t,n,r=Rf){e.push(t);const s=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!n&&Rh()&&Yp(s),s}function cr(e,...t){e.slice().forEach(n=>{n(...t)})}const h_=e=>e(),ru=Symbol(),Go=Symbol();function _a(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];ga(s)&&ga(r)&&e.hasOwnProperty(n)&&!kt(r)&&!yn(r)?e[n]=_a(s,r):e[n]=r}return e}const f_=Symbol();function d_(e){return!ga(e)||!Object.prototype.hasOwnProperty.call(e,f_)}const{assign:hn}=Object;function p_(e){return!!(kt(e)&&e.effect)}function m_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let u;function f(){l||(n.state.value[e]=s?s():{});const d=vm(n.state.value[e]);return hn(d,i,Object.keys(a||{}).reduce((m,T)=>(m[T]=Ya(wf(()=>{lo(n);const S=n._s.get(e);return a[T].call(S,S)})),m),{}))}return u=Cf(e,f,t,n,r,!0),u}function Cf(e,t,n={},r,s,i){let a;const l=hn({actions:{}},n),u={deep:!0};let f,d,m=[],T=[],S;const O=r.state.value[e];!i&&!O&&(r.state.value[e]={}),Ja({});let U;function B(g){let _;f=d=!1,typeof g=="function"?(g(r.state.value[e]),_={type:ys.patchFunction,storeId:e,events:S}):(_a(r.state.value[e],g),_={type:ys.patchObject,payload:g,storeId:e,events:S});const I=U=Symbol();Hh().then(()=>{U===I&&(f=!0)}),d=!0,cr(m,_,r.state.value[e])}const K=i?function(){const{state:_}=n,I=_?_():{};this.$patch(v=>{hn(v,I)})}:Rf;function W(){a.stop(),m=[],T=[],r._s.delete(e)}const Q=(g,_="")=>{if(ru in g)return g[Go]=_,g;const I=function(){lo(r);const v=Array.from(arguments),b=[],y=[];function Lt(at){b.push(at)}function Te(at){y.push(at)}cr(T,{args:v,name:I[Go],store:rt,after:Lt,onError:Te});let Pt;try{Pt=g.apply(this&&this.$id===e?this:rt,v)}catch(at){throw cr(y,at),at}return Pt instanceof Promise?Pt.then(at=>(cr(b,at),at)).catch(at=>(cr(y,at),Promise.reject(at))):(cr(b,Pt),Pt)};return I[ru]=!0,I[Go]=_,I},z={_p:r,$id:e,$onAction:nu.bind(null,T),$patch:B,$reset:K,$subscribe(g,_={}){const I=nu(m,g,_.detached,()=>v()),v=a.run(()=>_i(()=>r.state.value[e],b=>{(_.flush==="sync"?d:f)&&g({storeId:e,type:ys.direct,events:S},b)},hn({},u,_)));return I},$dispose:W},rt=no(z);r._s.set(e,rt);const w=(r._a&&r._a.runWithContext||h_)(()=>r._e.run(()=>(a=Sh()).run(()=>t({action:Q}))));for(const g in w){const _=w[g];if(kt(_)&&!p_(_)||yn(_))i||(O&&d_(_)&&(kt(_)?_.value=O[g]:_a(_,O[g])),r.state.value[e][g]=_);else if(typeof _=="function"){const I=Q(_,g);w[g]=I,l.actions[g]=_}}return hn(rt,w),hn(pt(rt),w),Object.defineProperty(rt,"$state",{get:()=>r.state.value[e],set:g=>{B(_=>{hn(_,g)})}}),r._p.forEach(g=>{hn(rt,a.run(()=>g({store:rt,app:r._a,pinia:r,options:l})))}),O&&i&&n.hydrate&&n.hydrate(rt.$state,O),f=!0,d=!0,rt}/*! #__NO_SIDE_EFFECTS__ */function g_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const u=ng();return a=a||(u?gs(Sf,null):null),a&&lo(a),a=bf,a._s.has(e)||(s?Cf(e,t,r,a):m_(e,r,a)),a._s.get(e)}return i.$id=e,i}function __(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n===void 0||n[t[r]]===void 0)return;if(n===null||n[t[r]]===null)return null;n=n[t[r]]}return n}function il(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=il(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function Pf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return il(e,Pf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Vf(e,t){return t.map(n=>n.split(".")).map(n=>[n,__(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>il(n,r[1],r[0]),{})}function Df(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>Pf(n,r),e)}function su(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a,beforeHydrate:l,afterHydrate:u},f,d=!0){try{d&&(l==null||l(f));const m=t.getItem(r);if(m){const T=n.deserialize(m),S=i?Vf(T,i):T,O=a?Df(S,a):S;e.$patch(O)}d&&(u==null||u(f))}catch(m){s&&console.error("[pinia-plugin-persistedstate]",m)}}function iu(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a}){try{const l=i?Vf(e,i):e,u=a?Df(l,a):l,f=n.serialize(u);t.setItem(r,f)}catch(l){s&&console.error("[pinia-plugin-persistedstate]",l)}}function y_(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function E_(e,t,n){const{pinia:r,store:s,options:{persist:i=n}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(s.$id in r.state.value)){const l=r._s.get(s.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);s.$hydrate=({runHooks:l=!0}={})=>{a.forEach(u=>{su(s,u,e,l)})},s.$persist=()=>{a.forEach(l=>{iu(s.$state,l)})},a.forEach(l=>{su(s,l,e),s.$subscribe((u,f)=>iu(f,l),{detached:!0})})}function T_(e={}){return function(t){E_(t,n=>{const r=y_(n.key,t.store.$id);return{key:(e.key?e.key:s=>s)(r),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>JSON.parse(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate??e.beforeHydrate,afterHydrate:n.afterHydrate??e.afterHydrate,pick:n.pick,omit:n.omit}},e.auto??!1)}}var v_=T_();const Yn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},I_={},w_={class:"carafe"};function A_(e,t){return Tt(),Nt("div",w_,[gi(e.$slots,"top",{},void 0,!0),gi(e.$slots,"mid",{},void 0,!0),gi(e.$slots,"bottom",{},void 0,!0)])}const Qo=Yn(I_,[["render",A_],["__scopeId","data-v-43d2bfc5"]]),b_={},S_={class:"mug"};function R_(e,t){return Tt(),Nt("div",S_,[gi(e.$slots,"default")])}const C_=Yn(b_,[["render",R_]]),P_=()=>{};var ou={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},V_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Nf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let T=(l&15)<<2|f>>6,S=f&63;u||(S=64,a||(T=64)),r.push(n[d],n[m],n[T],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):V_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new D_;const T=i<<2|l>>4;if(r.push(T),f!==64){const S=l<<4&240|f>>2;if(r.push(S),m!==64){const O=f<<6&192|m;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class D_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x_=function(e){const t=xf(e);return Nf.encodeByteArray(t,!0)},ki=function(e){return x_(e).replace(/\./g,"")},N_=function(e){try{return Nf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=()=>O_().__FIREBASE_DEFAULTS__,k_=()=>{if(typeof process>"u"||typeof ou>"u")return;const e=ou.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},L_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&N_(e[1]);return t&&JSON.parse(t)},ol=()=>{try{return P_()||M_()||k_()||L_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},F_=e=>{var t,n;return(n=(t=ol())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},U_=e=>{const t=F_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Of=()=>{var e;return(e=ol())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ki(JSON.stringify(n)),ki(JSON.stringify(a)),""].join(".")}const Es={};function q_(){const e={prod:[],emulator:[]};for(const t of Object.keys(Es))Es[t]?e.emulator.push(t):e.prod.push(t);return e}function H_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let au=!1;function z_(e,t){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Es[e]===t||Es[e]||au)return;Es[e]=t;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",i=q_().prod.length>0;function a(){const T=document.getElementById(r);T&&T.remove()}function l(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function u(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{au=!0,a()},T}function d(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function m(){const T=H_(r),S=n("text"),O=document.getElementById(S)||document.createElement("span"),U=n("learnmore"),B=document.getElementById(U)||document.createElement("a"),K=n("preprendIcon"),W=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;l(Q),d(B,U);const z=f();u(W,K),Q.append(W,O,B,z),document.body.appendChild(Q)}i?(O.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){var t;const e=(t=ol())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G_(){return!W_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q_(){try{return typeof indexedDB=="object"}catch{return!1}}function X_(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)==null?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="FirebaseError";class Or extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Y_,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mf.prototype.create)}}class Mf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?J_(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Or(s,l,r)}}function J_(e,t){return e.replace(Z_,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Z_=/\{\$([^}]+)}/g;function Li(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(lu(i)&&lu(a)){if(!Li(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function lu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(e){return e&&e._delegate?e._delegate:e}class Vs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new B_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ny(t))try{this.getOrInitializeService({instanceIdentifier:$n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=$n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$n){return this.instances.has(t)}getOptions(t=$n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ey(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=$n){return this.component?this.component.multipleInstances?t:$n:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ey(e){return e===$n?void 0:e}function ny(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ty(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ft||(ft={}));const sy={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},iy=ft.INFO,oy={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},ay=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=oy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class kf{constructor(t){this.name=t,this._logLevel=iy,this._logHandler=ay,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...t),this._logHandler(this,ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...t),this._logHandler(this,ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...t),this._logHandler(this,ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...t),this._logHandler(this,ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...t),this._logHandler(this,ft.ERROR,...t)}}const ly=(e,t)=>t.some(n=>e instanceof n);let cu,uu;function cy(){return cu||(cu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uy(){return uu||(uu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lf=new WeakMap,ya=new WeakMap,Ff=new WeakMap,Xo=new WeakMap,ll=new WeakMap;function hy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(En(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Lf.set(n,e)}).catch(()=>{}),ll.set(t,e),t}function fy(e){if(ya.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});ya.set(e,t)}let Ea={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ya.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Ff.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function dy(e){Ea=e(Ea)}function py(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Yo(this),t,...n);return Ff.set(r,t.sort?t.sort():[t]),En(r)}:uy().includes(e)?function(...t){return e.apply(Yo(this),t),En(Lf.get(this))}:function(...t){return En(e.apply(Yo(this),t))}}function my(e){return typeof e=="function"?py(e):(e instanceof IDBTransaction&&fy(e),ly(e,cy())?new Proxy(e,Ea):e)}function En(e){if(e instanceof IDBRequest)return hy(e);if(Xo.has(e))return Xo.get(e);const t=my(e);return t!==e&&(Xo.set(e,t),ll.set(t,e)),t}const Yo=e=>ll.get(e);function gy(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=En(a);return r&&a.addEventListener("upgradeneeded",u=>{r(En(a.result),u.oldVersion,u.newVersion,En(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const _y=["get","getKey","getAll","getAllKeys","count"],yy=["put","add","delete","clear"],Jo=new Map;function hu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Jo.get(t))return Jo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=yy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||_y.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Jo.set(t,i),i}dy(e=>({...e,get:(t,n,r)=>hu(t,n)||e.get(t,n,r),has:(t,n)=>!!hu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ty(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ty(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ta="@firebase/app",fu="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze=new kf("@firebase/app"),vy="@firebase/app-compat",Iy="@firebase/analytics-compat",wy="@firebase/analytics",Ay="@firebase/app-check-compat",by="@firebase/app-check",Sy="@firebase/auth",Ry="@firebase/auth-compat",Cy="@firebase/database",Py="@firebase/data-connect",Vy="@firebase/database-compat",Dy="@firebase/functions",xy="@firebase/functions-compat",Ny="@firebase/installations",Oy="@firebase/installations-compat",My="@firebase/messaging",ky="@firebase/messaging-compat",Ly="@firebase/performance",Fy="@firebase/performance-compat",Uy="@firebase/remote-config",By="@firebase/remote-config-compat",jy="@firebase/storage",$y="@firebase/storage-compat",qy="@firebase/firestore",Hy="@firebase/ai",zy="@firebase/firestore-compat",Ky="firebase",Wy="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]",Gy={[Ta]:"fire-core",[vy]:"fire-core-compat",[wy]:"fire-analytics",[Iy]:"fire-analytics-compat",[by]:"fire-app-check",[Ay]:"fire-app-check-compat",[Sy]:"fire-auth",[Ry]:"fire-auth-compat",[Cy]:"fire-rtdb",[Py]:"fire-data-connect",[Vy]:"fire-rtdb-compat",[Dy]:"fire-fn",[xy]:"fire-fn-compat",[Ny]:"fire-iid",[Oy]:"fire-iid-compat",[My]:"fire-fcm",[ky]:"fire-fcm-compat",[Ly]:"fire-perf",[Fy]:"fire-perf-compat",[Uy]:"fire-rc",[By]:"fire-rc-compat",[jy]:"fire-gcs",[$y]:"fire-gcs-compat",[qy]:"fire-fst",[zy]:"fire-fst-compat",[Hy]:"fire-vertex","fire-js":"fire-js",[Ky]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Map,Qy=new Map,Ia=new Map;function du(e,t){try{e.container.addComponent(t)}catch(n){Ze.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ui(e){const t=e.name;if(Ia.has(t))return Ze.debug(`There were multiple attempts to register component ${t}.`),!1;Ia.set(t,e);for(const n of Fi.values())du(n,e);for(const n of Qy.values())du(n,e);return!0}function Xy(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Yy(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tn=new Mf("app","Firebase",Jy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=Wy;function Uf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:va,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw Tn.create("bad-app-name",{appName:String(s)});if(n||(n=Of()),!n)throw Tn.create("no-options");const i=Fi.get(s);if(i){if(Li(n,i.options)&&Li(r,i.config))return i;throw Tn.create("duplicate-app",{appName:s})}const a=new ry(s);for(const u of Ia.values())a.addComponent(u);const l=new Zy(n,r,a);return Fi.set(s,l),l}function eE(e=va){const t=Fi.get(e);if(!t&&e===va&&Of())return Uf();if(!t)throw Tn.create("no-app",{appName:e});return t}function Ir(e,t,n){let r=Gy[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ze.warn(a.join(" "));return}Ui(new Vs(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="firebase-heartbeat-database",rE=1,Ds="firebase-heartbeat-store";let Zo=null;function Bf(){return Zo||(Zo=gy(nE,rE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ds)}catch(n){console.warn(n)}}}}).catch(e=>{throw Tn.create("idb-open",{originalErrorMessage:e.message})})),Zo}async function sE(e){try{const n=(await Bf()).transaction(Ds),r=await n.objectStore(Ds).get(jf(e));return await n.done,r}catch(t){if(t instanceof Or)Ze.warn(t.message);else{const n=Tn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ze.warn(n.message)}}}async function pu(e,t){try{const r=(await Bf()).transaction(Ds,"readwrite");await r.objectStore(Ds).put(t,jf(e)),await r.done}catch(n){if(n instanceof Or)Ze.warn(n.message);else{const r=Tn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ze.warn(r.message)}}}function jf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=1024,oE=30;class aE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mu();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>oE){const a=uE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ze.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mu(),{heartbeatsToSend:r,unsentEntries:s}=lE(this._heartbeatsCache.heartbeats),i=ki(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ze.warn(n),""}}}function mu(){return new Date().toISOString().substring(0,10)}function lE(e,t=iE){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),gu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Q_()?X_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return pu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return pu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function gu(e){return ki(JSON.stringify({version:2,heartbeats:e})).length}function uE(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(e){Ui(new Vs("platform-logger",t=>new Ey(t),"PRIVATE")),Ui(new Vs("heartbeat",t=>new aE(t),"PRIVATE")),Ir(Ta,fu,e),Ir(Ta,fu,"esm2020"),Ir("fire-js","")}hE("");var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vn,$f;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,g){function _(){}_.prototype=g.prototype,w.F=g.prototype,w.prototype=new _,w.prototype.constructor=w,w.D=function(I,v,b){for(var y=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)y[Lt-2]=arguments[Lt];return g.prototype[v].apply(I,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,_){_||(_=0);const I=Array(16);if(typeof g=="string")for(var v=0;v<16;++v)I[v]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(v=0;v<16;++v)I[v]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=w.g[0],_=w.g[1],v=w.g[2];let b=w.g[3],y;y=g+(b^_&(v^b))+I[0]+3614090360&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(v^g&(_^v))+I[1]+3905402710&4294967295,b=g+(y<<12&4294967295|y>>>20),y=v+(_^b&(g^_))+I[2]+606105819&4294967295,v=b+(y<<17&4294967295|y>>>15),y=_+(g^v&(b^g))+I[3]+3250441966&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(b^_&(v^b))+I[4]+4118548399&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(v^g&(_^v))+I[5]+1200080426&4294967295,b=g+(y<<12&4294967295|y>>>20),y=v+(_^b&(g^_))+I[6]+2821735955&4294967295,v=b+(y<<17&4294967295|y>>>15),y=_+(g^v&(b^g))+I[7]+4249261313&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(b^_&(v^b))+I[8]+1770035416&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(v^g&(_^v))+I[9]+2336552879&4294967295,b=g+(y<<12&4294967295|y>>>20),y=v+(_^b&(g^_))+I[10]+4294925233&4294967295,v=b+(y<<17&4294967295|y>>>15),y=_+(g^v&(b^g))+I[11]+2304563134&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(b^_&(v^b))+I[12]+1804603682&4294967295,g=_+(y<<7&4294967295|y>>>25),y=b+(v^g&(_^v))+I[13]+4254626195&4294967295,b=g+(y<<12&4294967295|y>>>20),y=v+(_^b&(g^_))+I[14]+2792965006&4294967295,v=b+(y<<17&4294967295|y>>>15),y=_+(g^v&(b^g))+I[15]+1236535329&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(v^b&(_^v))+I[1]+4129170786&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^v&(g^_))+I[6]+3225465664&4294967295,b=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(b^g))+I[11]+643717713&4294967295,v=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(v^b))+I[0]+3921069994&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(v^b&(_^v))+I[5]+3593408605&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^v&(g^_))+I[10]+38016083&4294967295,b=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(b^g))+I[15]+3634488961&4294967295,v=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(v^b))+I[4]+3889429448&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(v^b&(_^v))+I[9]+568446438&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^v&(g^_))+I[14]+3275163606&4294967295,b=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(b^g))+I[3]+4107603335&4294967295,v=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(v^b))+I[8]+1163531501&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(v^b&(_^v))+I[13]+2850285829&4294967295,g=_+(y<<5&4294967295|y>>>27),y=b+(_^v&(g^_))+I[2]+4243563512&4294967295,b=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(b^g))+I[7]+1735328473&4294967295,v=b+(y<<14&4294967295|y>>>18),y=_+(b^g&(v^b))+I[12]+2368359562&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(_^v^b)+I[5]+4294588738&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^v)+I[8]+2272392833&4294967295,b=g+(y<<11&4294967295|y>>>21),y=v+(b^g^_)+I[11]+1839030562&4294967295,v=b+(y<<16&4294967295|y>>>16),y=_+(v^b^g)+I[14]+4259657740&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(_^v^b)+I[1]+2763975236&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^v)+I[4]+1272893353&4294967295,b=g+(y<<11&4294967295|y>>>21),y=v+(b^g^_)+I[7]+4139469664&4294967295,v=b+(y<<16&4294967295|y>>>16),y=_+(v^b^g)+I[10]+3200236656&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(_^v^b)+I[13]+681279174&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^v)+I[0]+3936430074&4294967295,b=g+(y<<11&4294967295|y>>>21),y=v+(b^g^_)+I[3]+3572445317&4294967295,v=b+(y<<16&4294967295|y>>>16),y=_+(v^b^g)+I[6]+76029189&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(_^v^b)+I[9]+3654602809&4294967295,g=_+(y<<4&4294967295|y>>>28),y=b+(g^_^v)+I[12]+3873151461&4294967295,b=g+(y<<11&4294967295|y>>>21),y=v+(b^g^_)+I[15]+530742520&4294967295,v=b+(y<<16&4294967295|y>>>16),y=_+(v^b^g)+I[2]+3299628645&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(v^(_|~b))+I[0]+4096336452&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~v))+I[7]+1126891415&4294967295,b=g+(y<<10&4294967295|y>>>22),y=v+(g^(b|~_))+I[14]+2878612391&4294967295,v=b+(y<<15&4294967295|y>>>17),y=_+(b^(v|~g))+I[5]+4237533241&4294967295,_=v+(y<<21&4294967295|y>>>11),y=g+(v^(_|~b))+I[12]+1700485571&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~v))+I[3]+2399980690&4294967295,b=g+(y<<10&4294967295|y>>>22),y=v+(g^(b|~_))+I[10]+4293915773&4294967295,v=b+(y<<15&4294967295|y>>>17),y=_+(b^(v|~g))+I[1]+2240044497&4294967295,_=v+(y<<21&4294967295|y>>>11),y=g+(v^(_|~b))+I[8]+1873313359&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~v))+I[15]+4264355552&4294967295,b=g+(y<<10&4294967295|y>>>22),y=v+(g^(b|~_))+I[6]+2734768916&4294967295,v=b+(y<<15&4294967295|y>>>17),y=_+(b^(v|~g))+I[13]+1309151649&4294967295,_=v+(y<<21&4294967295|y>>>11),y=g+(v^(_|~b))+I[4]+4149444226&4294967295,g=_+(y<<6&4294967295|y>>>26),y=b+(_^(g|~v))+I[11]+3174756917&4294967295,b=g+(y<<10&4294967295|y>>>22),y=v+(g^(b|~_))+I[2]+718787259&4294967295,v=b+(y<<15&4294967295|y>>>17),y=_+(b^(v|~g))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(v+(y<<21&4294967295|y>>>11))&4294967295,w.g[2]=w.g[2]+v&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,g){g===void 0&&(g=w.length);const _=g-this.blockSize,I=this.C;let v=this.h,b=0;for(;b<g;){if(v==0)for(;b<=_;)s(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<g;)if(I[v++]=w.charCodeAt(b++),v==this.blockSize){s(this,I),v=0;break}}else for(;b<g;)if(I[v++]=w[b++],v==this.blockSize){s(this,I),v=0;break}}this.h=v,this.o+=g},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;g=this.o*8;for(var _=w.length-8;_<w.length;++_)w[_]=g&255,g/=256;for(this.v(w),w=Array(16),g=0,_=0;_<4;++_)for(let I=0;I<32;I+=8)w[g++]=this.g[_]>>>I&255;return w};function i(w,g){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=g(w)}function a(w,g){this.h=g;const _=[];let I=!0;for(let v=w.length-1;v>=0;v--){const b=w[v]|0;I&&b==g||(_[v]=b,I=!1)}this.g=_}var l={};function u(w){return-128<=w&&w<128?i(w,function(g){return new a([g|0],g<0?-1:0)}):new a([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return B(f(-w));const g=[];let _=1;for(let I=0;w>=_;I++)g[I]=w/_|0,_*=4294967296;return new a(g,0)}function d(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return B(d(w.substring(1),g));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=f(Math.pow(g,8));let I=m;for(let b=0;b<w.length;b+=8){var v=Math.min(8,w.length-b);const y=parseInt(w.substring(b,b+v),g);v<8?(v=f(Math.pow(g,v)),I=I.j(v).add(f(y))):(I=I.j(_),I=I.add(f(y)))}return I}var m=u(0),T=u(1),S=u(16777216);e=a.prototype,e.m=function(){if(U(this))return-B(this).m();let w=0,g=1;for(let _=0;_<this.g.length;_++){const I=this.i(_);w+=(I>=0?I:4294967296+I)*g,g*=4294967296}return w},e.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(O(this))return"0";if(U(this))return"-"+B(this).toString(w);const g=f(Math.pow(w,6));var _=this;let I="";for(;;){const v=z(_,g).g;_=K(_,v.j(g));let b=((_.g.length>0?_.g[0]:_.h)>>>0).toString(w);if(_=v,O(_))return b+I;for(;b.length<6;)b="0"+b;I=b+I}},e.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function O(w){if(w.h!=0)return!1;for(let g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function U(w){return w.h==-1}e.l=function(w){return w=K(this,w),U(w)?-1:O(w)?0:1};function B(w){const g=w.g.length,_=[];for(let I=0;I<g;I++)_[I]=~w.g[I];return new a(_,~w.h).add(T)}e.abs=function(){return U(this)?B(this):this},e.add=function(w){const g=Math.max(this.g.length,w.g.length),_=[];let I=0;for(let v=0;v<=g;v++){let b=I+(this.i(v)&65535)+(w.i(v)&65535),y=(b>>>16)+(this.i(v)>>>16)+(w.i(v)>>>16);I=y>>>16,b&=65535,y&=65535,_[v]=y<<16|b}return new a(_,_[_.length-1]&-2147483648?-1:0)};function K(w,g){return w.add(B(g))}e.j=function(w){if(O(this)||O(w))return m;if(U(this))return U(w)?B(this).j(B(w)):B(B(this).j(w));if(U(w))return B(this.j(B(w)));if(this.l(S)<0&&w.l(S)<0)return f(this.m()*w.m());const g=this.g.length+w.g.length,_=[];for(var I=0;I<2*g;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(let v=0;v<w.g.length;v++){const b=this.i(I)>>>16,y=this.i(I)&65535,Lt=w.i(v)>>>16,Te=w.i(v)&65535;_[2*I+2*v]+=y*Te,W(_,2*I+2*v),_[2*I+2*v+1]+=b*Te,W(_,2*I+2*v+1),_[2*I+2*v+1]+=y*Lt,W(_,2*I+2*v+1),_[2*I+2*v+2]+=b*Lt,W(_,2*I+2*v+2)}for(w=0;w<g;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=g;w<2*g;w++)_[w]=0;return new a(_,0)};function W(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function Q(w,g){this.g=w,this.h=g}function z(w,g){if(O(g))throw Error("division by zero");if(O(w))return new Q(m,m);if(U(w))return g=z(B(w),g),new Q(B(g.g),B(g.h));if(U(g))return g=z(w,B(g)),new Q(B(g.g),g.h);if(w.g.length>30){if(U(w)||U(g))throw Error("slowDivide_ only works with positive integers.");for(var _=T,I=g;I.l(w)<=0;)_=rt(_),I=rt(I);var v=yt(_,1),b=yt(I,1);for(I=yt(I,2),_=yt(_,2);!O(I);){var y=b.add(I);y.l(w)<=0&&(v=v.add(_),b=y),I=yt(I,1),_=yt(_,1)}return g=K(w,v.j(g)),new Q(v,g)}for(v=m;w.l(g)>=0;){for(_=Math.max(1,Math.floor(w.m()/g.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),b=f(_),y=b.j(g);U(y)||y.l(w)>0;)_-=I,b=f(_),y=b.j(g);O(b)&&(b=T),v=v.add(b),w=K(w,y)}return new Q(v,w)}e.B=function(w){return z(this,w).h},e.and=function(w){const g=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<g;I++)_[I]=this.i(I)&w.i(I);return new a(_,this.h&w.h)},e.or=function(w){const g=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<g;I++)_[I]=this.i(I)|w.i(I);return new a(_,this.h|w.h)},e.xor=function(w){const g=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<g;I++)_[I]=this.i(I)^w.i(I);return new a(_,this.h^w.h)};function rt(w){const g=w.g.length+1,_=[];for(let I=0;I<g;I++)_[I]=w.i(I)<<1|w.i(I-1)>>>31;return new a(_,w.h)}function yt(w,g){const _=g>>5;g%=32;const I=w.g.length-_,v=[];for(let b=0;b<I;b++)v[b]=g>0?w.i(b+_)>>>g|w.i(b+_+1)<<32-g:w.i(b+_);return new a(v,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$f=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,vn=a}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qf,ls,Hf,Ti,wa,zf,Kf,Wf;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ci=="object"&&ci];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&t(h,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var h=[],p;for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&h.push([p,c[p]]);return h}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,h){return o.call.apply(o.bind,arguments)}function f(o,c,h){return f=u,f.apply(null,arguments)}function d(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,c){function h(){}h.prototype=c.prototype,o.Z=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Ob=function(p,R,C){for(var j=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)j[ot-2]=arguments[ot];return c.prototype[R].apply(p,j)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function S(o){const c=o.length;if(c>0){const h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function O(o,c){for(let p=1;p<arguments.length;p++){const R=arguments[p];var h=typeof R;if(h=h!="object"?h:R?Array.isArray(R)?"array":h:"null",h=="array"||h=="object"&&typeof R.length=="number"){h=o.length||0;const C=R.length||0;o.length=h+C;for(let j=0;j<C;j++)o[h+j]=R[j]}else o.push(R)}}class U{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function B(o){a.setTimeout(()=>{throw o},0)}function K(){var o=w;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class W{constructor(){this.h=this.g=null}add(c,h){const p=Q.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Q=new U(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,yt=!1,w=new W,g=()=>{const o=Promise.resolve(void 0);rt=()=>{o.then(_)}};function _(){for(var o;o=K();){try{o.h.call(o.g)}catch(h){B(h)}var c=Q;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}yt=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};a.addEventListener("test",h,c),a.removeEventListener("test",h,c)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function Lt(o,c){v.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}m(Lt,v),Lt.prototype.init=function(o,c){const h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),Pt=0;function at(o,c,h,p,R){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=R,this.key=++Pt,this.da=this.fa=!1}function mt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ve(o,c,h){for(const p in o)c.call(h,o[p],p,o)}function nr(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function Ve(o){const c={};for(const h in o)c[h]=o[h];return c}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ur(o,c){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<pe.length;C++)h=pe[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function rr(o){this.src=o,this.g={},this.h=0}rr.prototype.add=function(o,c,h,p,R){const C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);const j=ze(o,c,p,R);return j>-1?(c=o[j],h||(c.fa=!1)):(c=new at(c,this.src,C,!!p,R),c.fa=h,o.push(c)),c};function Br(o,c){const h=c.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,c,void 0),C;(C=R>=0)&&Array.prototype.splice.call(p,R,1),C&&(mt(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function ze(o,c,h,p){for(let R=0;R<o.length;++R){const C=o[R];if(!C.da&&C.listener==c&&C.capture==!!h&&C.ha==p)return R}return-1}var rn="closure_lm_"+(Math.random()*1e6|0),xn={};function jr(o,c,h,p,R){if(Array.isArray(c)){for(let C=0;C<c.length;C++)jr(o,c[C],h,p,R);return null}return h=$(h),o&&o[Te]?o.J(c,h,l(p)?!!p.capture:!1,R):Nn(o,c,h,!1,p,R)}function Nn(o,c,h,p,R,C){if(!c)throw Error("Invalid event type");const j=l(R)?!!R.capture:!!R;let ot=D(o);if(ot||(o[rn]=ot=new rr(o)),h=ot.add(c,h,p,j,C),h.proxy)return h;if(p=Ll(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)b||(R=j),R===void 0&&(R=!1),o.addEventListener(c.toString(),p,R);else if(o.attachEvent)o.attachEvent(P(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Ll(){function o(h){return c.call(o.src,o.listener,h)}const c=F;return o}function E(o,c,h,p,R){if(Array.isArray(c))for(var C=0;C<c.length;C++)E(o,c[C],h,p,R);else p=l(p)?!!p.capture:!!p,h=$(h),o&&o[Te]?(o=o.i,C=String(c).toString(),C in o.g&&(c=o.g[C],h=ze(c,h,p,R),h>-1&&(mt(c[h]),Array.prototype.splice.call(c,h,1),c.length==0&&(delete o.g[C],o.h--)))):o&&(o=D(o))&&(c=o.g[c.toString()],o=-1,c&&(o=ze(c,h,p,R)),(h=o>-1?c[o]:null)&&A(h))}function A(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Te])Br(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(P(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=D(c))?(Br(h,o),h.h==0&&(h.src=null,c[rn]=null)):mt(o)}}}function P(o){return o in xn?xn[o]:xn[o]="on"+o}function F(o,c){if(o.da)o=!0;else{c=new Lt(c,this);const h=o.listener,p=o.ha||o.src;o.fa&&A(o),o=h.call(p,c)}return o}function D(o){return o=o[rn],o instanceof rr?o:null}var N="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(o){return typeof o=="function"?o:(o[N]||(o[N]=function(c){return o.handleEvent(c)}),o[N])}function L(){I.call(this),this.i=new rr(this),this.M=this,this.G=null}m(L,I),L.prototype[Te]=!0,L.prototype.removeEventListener=function(o,c,h,p){E(this,o,c,h,p)};function M(o,c){var h,p=o.G;if(p)for(h=[];p;p=p.G)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new v(c,o);else if(c instanceof v)c.target=c.target||o;else{var R=c;c=new v(p,o),Ur(c,R)}R=!0;let C,j;if(h)for(j=h.length-1;j>=0;j--)C=c.g=h[j],R=k(C,p,!0,c)&&R;if(C=c.g=o,R=k(C,p,!0,c)&&R,R=k(C,p,!1,c)&&R,h)for(j=0;j<h.length;j++)C=c.g=h[j],R=k(C,p,!1,c)&&R}L.prototype.N=function(){if(L.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const h=o.g[c];for(let p=0;p<h.length;p++)mt(h[p]);delete o.g[c],o.h--}}this.G=null},L.prototype.J=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},L.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function k(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let R=!0;for(let C=0;C<c.length;++C){const j=c[C];if(j&&!j.da&&j.capture==h){const ot=j.listener,jt=j.ha||j.src;j.fa&&Br(o.i,j),R=ot.call(jt,p)!==!1&&R}}return R&&!p.defaultPrevented}function J(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function q(o){o.g=J(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class X extends I{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(o){I.call(this),this.h=o,this.g={}}m(Z,I);var lt=[];function Et(o){ve(o.g,function(c,h){this.g.hasOwnProperty(h)&&A(c)},o),o.g={}}Z.prototype.N=function(){Z.Z.N.call(this),Et(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=a.JSON.stringify,te=a.JSON.parse,ee=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function me(){}function ge(){}var be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sr(){v.call(this,"d")}m(sr,v);function Qt(){v.call(this,"c")}m(Qt,v);var zt={},$r=null;function On(){return $r=$r||new L}zt.Ia="serverreachability";function Fl(o){v.call(this,zt.Ia,o)}m(Fl,v);function qr(o){const c=On();M(c,new Fl(c))}zt.STAT_EVENT="statevent";function Ul(o,c){v.call(this,zt.STAT_EVENT,o),this.stat=c}m(Ul,v);function ce(o){const c=On();M(c,new Ul(c,o))}zt.Ja="timingevent";function Bl(o,c){v.call(this,zt.Ja,o),this.size=c}m(Bl,v);function Hr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function zr(){this.g=!0}zr.prototype.ua=function(){this.g=!1};function yp(o,c,h,p,R,C){o.info(function(){if(o.g)if(C){var j="",ot=C.split("&");for(let vt=0;vt<ot.length;vt++){var jt=ot[vt].split("=");if(jt.length>1){const Kt=jt[0];jt=jt[1];const xe=Kt.split("_");j=xe.length>=2&&xe[1]=="type"?j+(Kt+"="+jt+"&"):j+(Kt+"=redacted&")}}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+c+`
`+h+`
`+j})}function Ep(o,c,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+c+`
`+h+`
`+C+" "+j})}function ir(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+vp(o,h)+(p?" "+p:"")})}function Tp(o,c){o.info(function(){return"TIMEOUT: "+c})}zr.prototype.info=function(){};function vp(o,c){if(!o.g)return c;if(!c)return null;try{const C=JSON.parse(c);if(C){for(o=0;o<C.length;o++)if(Array.isArray(C[o])){var h=C[o];if(!(h.length<2)){var p=h[1];if(Array.isArray(p)&&!(p.length<1)){var R=p[0];if(R!="noop"&&R!="stop"&&R!="close")for(let j=1;j<p.length;j++)p[j]=""}}}}return dt(C)}catch{return c}}var Qs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$l;function Ao(){}m(Ao,me),Ao.prototype.g=function(){return new XMLHttpRequest},$l=new Ao;function Kr(o){return encodeURIComponent(String(o))}function Ip(o){var c=1;o=o.split(":");const h=[];for(;c>0&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function sn(o,c,h,p){this.j=o,this.i=c,this.l=h,this.S=p||1,this.V=new Z(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ql}function ql(){this.i=null,this.g="",this.h=!1}var Hl={},bo={};function So(o,c,h){o.M=1,o.A=Ys(De(c)),o.u=h,o.R=!0,zl(o,null)}function zl(o,c){o.F=Date.now(),Xs(o),o.B=De(o.A);var h=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),sc(h.i,"t",p),o.C=0,h=o.j.L,o.h=new ql,o.g=Ic(o.j,h?c:null,!o.u),o.P>0&&(o.O=new X(f(o.Y,o,o.g),o.P)),c=o.V,h=o.g,p=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(lt[0]=R.toString()),R=lt);for(let C=0;C<R.length;C++){const j=jr(h,R[C],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.J?Ve(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),qr(),yp(o.i,o.v,o.B,o.l,o.S,o.u)}sn.prototype.ba=function(o){o=o.target;const c=this.O;c&&ln(o)==3?c.j():this.Y(o)},sn.prototype.Y=function(o){try{if(o==this.g)t:{const ot=ln(this.g),jt=this.g.ya(),vt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||hc(this.g)))){this.K||ot!=4||jt==7||(jt==8||vt<=0?qr(3):qr(2)),Ro(this);var c=this.g.ca();this.X=c;var h=wp(this);if(this.o=c==200,Ep(this.i,this.v,this.B,this.l,this.S,ot,c),this.o){if(this.U&&!this.L){e:{if(this.g){var p,R=this.g;if((p=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var C=p;break e}}C=null}if(o=C)ir(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Co(this,o);else{this.o=!1,this.m=3,ce(12),Mn(this),Wr(this);break t}}if(this.R){o=!0;let Kt;for(;!this.K&&this.C<h.length;)if(Kt=Ap(this,h),Kt==bo){ot==4&&(this.m=4,ce(14),o=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Hl){this.m=4,ce(15),ir(this.i,this.l,h,"[Invalid Chunk]"),o=!1;break}else ir(this.i,this.l,Kt,null),Co(this,Kt);if(Kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||h.length!=0||this.h.h||(this.m=1,ce(16),o=!1),this.o=this.o&&o,!o)ir(this.i,this.l,h,"[Invalid Chunked Response]"),Mn(this),Wr(this);else if(h.length>0&&!this.W){this.W=!0;var j=this.j;j.g==this&&j.aa&&!j.P&&(j.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),ko(j),j.P=!0,ce(11))}}else ir(this.i,this.l,h,null),Co(this,h);ot==4&&Mn(this),this.o&&!this.K&&(ot==4?yc(this.j,this):(this.o=!1,Xs(this)))}else Fp(this.g),c==400&&h.indexOf("Unknown SID")>0?(this.m=3,ce(12)):(this.m=0,ce(13)),Mn(this),Wr(this)}}}catch{}finally{}};function wp(o){if(!Kl(o))return o.g.la();const c=hc(o.g);if(c==="")return"";let h="";const p=c.length,R=ln(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Mn(o),Wr(o),"";o.h.i=new a.TextDecoder}for(let C=0;C<p;C++)o.h.h=!0,h+=o.h.i.decode(c[C],{stream:!(R&&C==p-1)});return c.length=0,o.h.g+=h,o.C=0,o.h.g}function Kl(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Ap(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?bo:(h=Number(c.substring(h,p)),isNaN(h)?Hl:(p+=1,p+h>c.length?bo:(c=c.slice(p,p+h),o.C=p+h,c)))}sn.prototype.cancel=function(){this.K=!0,Mn(this)};function Xs(o){o.T=Date.now()+o.H,Wl(o,o.H)}function Wl(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Hr(f(o.aa,o),c)}function Ro(o){o.D&&(a.clearTimeout(o.D),o.D=null)}sn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Tp(this.i,this.B),this.M!=2&&(qr(),ce(17)),Mn(this),this.m=2,Wr(this)):Wl(this,this.T-o)};function Wr(o){o.j.I==0||o.K||yc(o.j,o)}function Mn(o){Ro(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,Et(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function Co(o,c){try{var h=o.j;if(h.I!=0&&(h.g==o||Po(h.h,o))){if(!o.L&&Po(h.h,o)&&h.I==3){try{var p=h.Ba.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.v){if(h.g)if(h.g.F+3e3<o.F)ni(h),ti(h);else break t;Mo(h),ce(18)}}else h.xa=R[1],0<h.xa-h.K&&R[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=Hr(f(h.Va,h),6e3));Xl(h.h)<=1&&h.ta&&(h.ta=void 0)}else Ln(h,11)}else if((o.L||h.g==o)&&ni(h),!y(c))for(R=h.Ba.g.parse(c),c=0;c<R.length;c++){let vt=R[c];const Kt=vt[0];if(!(Kt<=h.K))if(h.K=Kt,vt=vt[1],h.I==2)if(vt[0]=="c"){h.M=vt[1],h.ba=vt[2];const xe=vt[3];xe!=null&&(h.ka=xe,h.j.info("VER="+h.ka));const Fn=vt[4];Fn!=null&&(h.za=Fn,h.j.info("SVER="+h.za));const cn=vt[5];cn!=null&&typeof cn=="number"&&cn>0&&(p=1.5*cn,h.O=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const un=o.g;if(un){const si=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var C=p.h;C.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Vo(C,C.h),C.h=null))}if(p.G){const Lo=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(p.wa=Lo,St(p.J,p.G,Lo))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-o.F,h.j.info("Handshake RTT: "+h.T+"ms")),p=h;var j=o;if(p.na=vc(p,p.L?p.ba:null,p.W),j.L){Yl(p.h,j);var ot=j,jt=p.O;jt&&(ot.H=jt),ot.D&&(Ro(ot),Xs(ot)),p.g=j}else gc(p);h.i.length>0&&ei(h)}else vt[0]!="stop"&&vt[0]!="close"||Ln(h,7);else h.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Ln(h,7):Oo(h):vt[0]!="noop"&&h.l&&h.l.qa(vt),h.A=0)}}qr(4)}catch{}}var bp=class{constructor(o,c){this.g=o,this.map=c}};function Gl(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ql(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Xl(o){return o.h?1:o.g?o.g.size:0}function Po(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Vo(o,c){o.g?o.g.add(c):o.h=c}function Yl(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Gl.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Jl(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.G);return c}return S(o.i)}var Zl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sp(o,c){if(o){o=o.split("&");for(let h=0;h<o.length;h++){const p=o[h].indexOf("=");let R,C=null;p>=0?(R=o[h].substring(0,p),C=o[h].substring(p+1)):R=o[h],c(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function on(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof on?(this.l=o.l,Gr(this,o.j),this.o=o.o,this.g=o.g,Qr(this,o.u),this.h=o.h,Do(this,ic(o.i)),this.m=o.m):o&&(c=String(o).match(Zl))?(this.l=!1,Gr(this,c[1]||"",!0),this.o=Xr(c[2]||""),this.g=Xr(c[3]||"",!0),Qr(this,c[4]),this.h=Xr(c[5]||"",!0),Do(this,c[6]||"",!0),this.m=Xr(c[7]||"")):(this.l=!1,this.i=new Jr(null,this.l))}on.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(Yr(c,tc,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Yr(c,tc,!0),"@"),o.push(Kr(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&o.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Yr(h,h.charAt(0)=="/"?Pp:Cp,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Yr(h,Dp)),o.join("")},on.prototype.resolve=function(o){const c=De(this);let h=!!o.j;h?Gr(c,o.j):h=!!o.o,h?c.o=o.o:h=!!o.g,h?c.g=o.g:h=o.u!=null;var p=o.h;if(h)Qr(c,o.u);else if(h=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var R=c.h.lastIndexOf("/");R!=-1&&(p=c.h.slice(0,R+1)+p)}if(R=p,R==".."||R==".")p="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){p=R.lastIndexOf("/",0)==0,R=R.split("/");const C=[];for(let j=0;j<R.length;){const ot=R[j++];ot=="."?p&&j==R.length&&C.push(""):ot==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),p&&j==R.length&&C.push("")):(C.push(ot),p=!0)}p=C.join("/")}else p=R}return h?c.h=p:h=o.i.toString()!=="",h?Do(c,ic(o.i)):h=!!o.m,h&&(c.m=o.m),c};function De(o){return new on(o)}function Gr(o,c,h){o.j=h?Xr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Qr(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function Do(o,c,h){c instanceof Jr?(o.i=c,xp(o.i,o.l)):(h||(c=Yr(c,Vp)),o.i=new Jr(c,o.l))}function St(o,c,h){o.i.set(c,h)}function Ys(o){return St(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Xr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Yr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,Rp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Rp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var tc=/[#\/\?@]/g,Cp=/[#\?:]/g,Pp=/[#\?]/g,Vp=/[#\?@]/g,Dp=/#/g;function Jr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function kn(o){o.g||(o.g=new Map,o.h=0,o.i&&Sp(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}e=Jr.prototype,e.add=function(o,c){kn(this),this.i=null,o=or(this,o);let h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function ec(o,c){kn(o),c=or(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function nc(o,c){return kn(o),c=or(o,c),o.g.has(c)}e.forEach=function(o,c){kn(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(c,R,p,this)},this)},this)};function rc(o,c){kn(o);let h=[];if(typeof c=="string")nc(o,c)&&(h=h.concat(o.g.get(or(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)h=h.concat(o[c]);return h}e.set=function(o,c){return kn(this),this.i=null,o=or(this,o),nc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=rc(this,o),o.length>0?String(o[0]):c):c};function sc(o,c,h){ec(o,c),h.length>0&&(o.i=null,o.g.set(or(o,c),S(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let p=0;p<c.length;p++){var h=c[p];const R=Kr(h);h=rc(this,h);for(let C=0;C<h.length;C++){let j=R;h[C]!==""&&(j+="="+Kr(h[C])),o.push(j)}}return this.i=o.join("&")};function ic(o){const c=new Jr;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function or(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function xp(o,c){c&&!o.j&&(kn(o),o.i=null,o.g.forEach(function(h,p){const R=p.toLowerCase();p!=R&&(ec(this,p),sc(this,R,h))},o)),o.j=c}function Np(o,c){const h=new zr;if(a.Image){const p=new Image;p.onload=d(an,h,"TestLoadImage: loaded",!0,c,p),p.onerror=d(an,h,"TestLoadImage: error",!1,c,p),p.onabort=d(an,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=d(an,h,"TestLoadImage: timeout",!1,c,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function Op(o,c){const h=new zr,p=new AbortController,R=setTimeout(()=>{p.abort(),an(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?an(h,"TestPingServer: ok",!0,c):an(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),an(h,"TestPingServer: error",!1,c)})}function an(o,c,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function Mp(){this.g=new ee}function xo(o){this.i=o.Sb||null,this.h=o.ab||!1}m(xo,me),xo.prototype.g=function(){return new Js(this.i,this.h)};function Js(o,c){L.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Js,L),e=Js.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,ts(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;oc(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function oc(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Zr(this):ts(this),this.readyState==3&&oc(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,Zr(this))},e.Na=function(o){this.g&&(this.response=o,Zr(this))},e.ga=function(){this.g&&Zr(this)};function Zr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,ts(o)}e.setRequestHeader=function(o,c){this.A.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function ts(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ac(o){let c="";return ve(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function No(o,c,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=ac(h),typeof o=="string"?h!=null&&Kr(h):St(o,c,h))}function Dt(o){L.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Dt,L);var kp=/^https?$/i,Lp=["POST","PUT"];e=Dt.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$l.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(C){lc(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Lp,c,void 0)>=0)||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(C){lc(this,C)}};function lc(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,cc(o),Zs(o)}function cc(o){o.A||(o.A=!0,M(o,"complete"),M(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,M(this,"complete"),M(this,"abort"),Zs(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zs(this,!0)),Dt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?uc(this):this.Xa())},e.Xa=function(){uc(this)};function uc(o){if(o.h&&typeof i<"u"){if(o.v&&ln(o)==4)setTimeout(o.Ca.bind(o),0);else if(M(o,"readystatechange"),ln(o)==4){o.h=!1;try{const C=o.ca();t:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var h;if(!(h=c)){var p;if(p=C===0){let j=String(o.D).match(Zl)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),p=!kp.test(j?j.toLowerCase():"")}h=p}if(h)M(o,"complete"),M(o,"success");else{o.o=6;try{var R=ln(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",cc(o)}}finally{Zs(o)}}}}function Zs(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const h=o.g;o.g=null,c||M(o,"ready");try{h.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function ln(o){return o.g?o.g.readyState:0}e.ca=function(){try{return ln(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),te(c)}};function hc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Fp(o){const c={};o=(o.g&&ln(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(y(o[p]))continue;var h=Ip(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=c[R]||[];c[R]=C,C.push(h)}nr(c,function(p){return p.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function fc(o){this.za=0,this.i=[],this.j=new zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=es("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=es("baseRetryDelayMs",5e3,o),this.Za=es("retryDelaySeedMs",1e4,o),this.Ta=es("forwardChannelMaxRetries",2,o),this.va=es("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Gl(o&&o.concurrentRequestLimit),this.Ba=new Mp,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=fc.prototype,e.ka=8,e.I=1,e.connect=function(o,c,h,p){ce(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.J=vc(this,null,this.W),ei(this)};function Oo(o){if(dc(o),o.I==3){var c=o.V++,h=De(o.J);if(St(h,"SID",o.M),St(h,"RID",c),St(h,"TYPE","terminate"),ns(o,h),c=new sn(o,o.j,c),c.M=2,c.A=Ys(De(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!h&&a.Image&&(new Image().src=c.A,h=!0),h||(c.g=Ic(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Xs(c)}Tc(o)}function ti(o){o.g&&(ko(o),o.g.cancel(),o.g=null)}function dc(o){ti(o),o.v&&(a.clearTimeout(o.v),o.v=null),ni(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ei(o){if(!Ql(o.h)&&!o.m){o.m=!0;var c=o.Ea;rt||g(),yt||(rt(),yt=!0),w.add(c,o),o.D=0}}function Up(o,c){return Xl(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Hr(f(o.Ea,o,c),Ec(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new sn(this,this.j,o);let C=this.o;if(this.U&&(C?(C=Ve(C),Ur(C,this.U)):C=this.U),this.u!==null||this.R||(R.J=C,C=null),this.S)t:{for(var c=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,c>4096){c=h;break t}if(c===4096||h===this.i.length-1){c=h+1;break t}}c=1e3}else c=1e3;c=mc(this,R,c),h=De(this.J),St(h,"RID",o),St(h,"CVER",22),this.G&&St(h,"X-HTTP-Session-Id",this.G),ns(this,h),C&&(this.R?c="headers="+Kr(ac(C))+"&"+c:this.u&&No(h,this.u,C)),Vo(this.h,R),this.Ra&&St(h,"TYPE","init"),this.S?(St(h,"$req",c),St(h,"SID","null"),R.U=!0,So(R,h,null)):So(R,h,c),this.I=2}}else this.I==3&&(o?pc(this,o):this.i.length==0||Ql(this.h)||pc(this))};function pc(o,c){var h;c?h=c.l:h=o.V++;const p=De(o.J);St(p,"SID",o.M),St(p,"RID",h),St(p,"AID",o.K),ns(o,p),o.u&&o.o&&No(p,o.u,o.o),h=new sn(o,o.j,h,o.D+1),o.u===null&&(h.J=o.o),c&&(o.i=c.G.concat(o.i)),c=mc(o,h,1e3),h.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Vo(o.h,h),So(h,p,c)}function ns(o,c){o.H&&ve(o.H,function(h,p){St(c,p,h)}),o.l&&ve({},function(h,p){St(c,p,h)})}function mc(o,c,h){h=Math.min(o.i.length,h);const p=o.l?f(o.l.Ka,o.l,o):null;t:{var R=o.i;let ot=-1;for(;;){const jt=["count="+h];ot==-1?h>0?(ot=R[0].g,jt.push("ofs="+ot)):ot=0:jt.push("ofs="+ot);let vt=!0;for(let Kt=0;Kt<h;Kt++){var C=R[Kt].g;const xe=R[Kt].map;if(C-=ot,C<0)ot=Math.max(0,R[Kt].g-100),vt=!1;else try{C="req"+C+"_"||"";try{var j=xe instanceof Map?xe:Object.entries(xe);for(const[Fn,cn]of j){let un=cn;l(cn)&&(un=dt(cn)),jt.push(C+Fn+"="+encodeURIComponent(un))}}catch(Fn){throw jt.push(C+"type="+encodeURIComponent("_badmap")),Fn}}catch{p&&p(xe)}}if(vt){j=jt.join("&");break t}}j=void 0}return o=o.i.splice(0,h),c.G=o,j}function gc(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;rt||g(),yt||(rt(),yt=!0),w.add(c,o),o.A=0}}function Mo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Hr(f(o.Da,o),Ec(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,_c(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Hr(f(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ce(10),ti(this),_c(this))};function ko(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function _c(o){o.g=new sn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=De(o.na);St(c,"RID","rpc"),St(c,"SID",o.M),St(c,"AID",o.K),St(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&St(c,"TO",o.ia),St(c,"TYPE","xmlhttp"),ns(o,c),o.u&&o.o&&No(c,o.u,o.o),o.O&&(o.g.H=o.O);var h=o.g;o=o.ba,h.M=1,h.A=Ys(De(c)),h.u=null,h.R=!0,zl(h,o)}e.Va=function(){this.C!=null&&(this.C=null,ti(this),Mo(this),ce(19))};function ni(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function yc(o,c){var h=null;if(o.g==c){ni(o),ko(o),o.g=null;var p=2}else if(Po(o.h,c))h=c.G,Yl(o.h,c),p=1;else return;if(o.I!=0){if(c.o)if(p==1){h=c.u?c.u.length:0,c=Date.now()-c.F;var R=o.D;p=On(),M(p,new Bl(p,h)),ei(o)}else gc(o);else if(R=c.m,R==3||R==0&&c.X>0||!(p==1&&Up(o,c)||p==2&&Mo(o)))switch(h&&h.length>0&&(c=o.h,c.i=c.i.concat(h)),R){case 1:Ln(o,5);break;case 4:Ln(o,10);break;case 3:Ln(o,6);break;default:Ln(o,2)}}}function Ec(o,c){let h=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(h*=2),h*c}function Ln(o,c){if(o.j.info("Error code "+c),c==2){var h=f(o.bb,o),p=o.Ua;const R=!p;p=new on(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gr(p,"https"),Ys(p),R?Np(p.toString(),h):Op(p.toString(),h)}else ce(2);o.I=0,o.l&&o.l.pa(c),Tc(o),dc(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Tc(o){if(o.I=0,o.ja=[],o.l){const c=Jl(o.h);(c.length!=0||o.i.length!=0)&&(O(o.ja,c),O(o.ja,o.i),o.h.i.length=0,S(o.i),o.i.length=0),o.l.oa()}}function vc(o,c,h){var p=h instanceof on?De(h):new on(h);if(p.g!="")c&&(p.g=c+"."+p.g),Qr(p,p.u);else{var R=a.location;p=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;const C=new on(null);p&&Gr(C,p),c&&(C.g=c),R&&Qr(C,R),h&&(C.h=h),p=C}return h=o.G,c=o.wa,h&&c&&St(p,h,c),St(p,"VER",o.ka),ns(o,p),p}function Ic(o,c,h){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Dt(new xo({ab:h})):new Dt(o.ma),c.Fa(o.L),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}e=wc.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function ri(){}ri.prototype.g=function(o,c){return new _e(o,c)};function _e(o,c){L.call(this),this.g=new fc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!y(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!y(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new ar(this)}m(_e,L),_e.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_e.prototype.close=function(){Oo(this.g)},_e.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.v&&(h={},h.__data__=dt(o),o=h);c.i.push(new bp(c.Ya++,o)),c.I==3&&ei(c)},_e.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,_e.Z.N.call(this)};function Ac(o){sr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const h in c){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}m(Ac,sr);function bc(){Qt.call(this),this.status=1}m(bc,Qt);function ar(o){this.g=o}m(ar,wc),ar.prototype.ra=function(){M(this.g,"a")},ar.prototype.qa=function(o){M(this.g,new Ac(o))},ar.prototype.pa=function(o){M(this.g,new bc)},ar.prototype.oa=function(){M(this.g,"b")},ri.prototype.createWebChannel=ri.prototype.g,_e.prototype.send=_e.prototype.o,_e.prototype.open=_e.prototype.m,_e.prototype.close=_e.prototype.close,Wf=function(){return new ri},Kf=function(){return On()},zf=zt,wa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,Ti=Qs,jl.COMPLETE="complete",Hf=jl,ge.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",L.prototype.listen=L.prototype.J,ls=ge,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,qf=Dt}).apply(typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{});const yu="@firebase/firestore",Eu="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}se.UNAUTHENTICATED=new se(null),se.GOOGLE_CREDENTIALS=new se("google-credentials-uid"),se.FIRST_PARTY=new se("first-party-uid"),se.MOCK_USER=new se("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new kf("@firebase/firestore");function dr(){return Gn.logLevel}function H(e,...t){if(Gn.logLevel<=ft.DEBUG){const n=t.map(cl);Gn.debug(`Firestore (${Mr}): ${e}`,...n)}}function tn(e,...t){if(Gn.logLevel<=ft.ERROR){const n=t.map(cl);Gn.error(`Firestore (${Mr}): ${e}`,...n)}}function Rr(e,...t){if(Gn.logLevel<=ft.WARN){const n=t.map(cl);Gn.warn(`Firestore (${Mr}): ${e}`,...n)}}function cl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Gf(e,r,n)}function Gf(e,t,n){let r=`FIRESTORE (${Mr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw tn(r),new Error(r)}function _t(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||Gf(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Or{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(se.UNAUTHENTICATED)))}shutdown(){}}class dE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pE{constructor(t){this.t=t,this.currentUser=se.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_t(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new In;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new In,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;t.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new In)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new Qf(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new se(t)}}class mE{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=se.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gE{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new mE(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(se.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _E{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yy(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){_t(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Tu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Aa(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return ta(s)===ta(i)?ct(s,i):ta(s)?1:-1}return ct(e.length,t.length)}const EE=55296,TE=57343;function ta(e){const t=e.charCodeAt(0);return t>=EE&&t<=TE}function Cr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="__name__";class Me{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Me.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Me?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Me.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ct(t.length,n.length)}static compareSegments(t,n){const r=Me.isNumericId(t),s=Me.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Me.extractNumericId(t).compare(Me.extractNumericId(n)):Aa(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vn.fromString(t.substring(4,t.length-2))}}class Rt extends Me{construct(t,n,r){return new Rt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new G(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Rt(n)}static emptyPath(){return new Rt([])}}const vE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Me{construct(t,n,r){return new Jt(t,n,r)}static isValidIdentifier(t){return vE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vu}static keyField(){return new Jt([vu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(x.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new G(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new G(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.path=t}static fromPath(t){return new Y(Rt.fromString(t))}static fromName(t){return new Y(Rt.fromString(t).popFirst(5))}static empty(){return new Y(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Y(new Rt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(e,t,n){if(!n)throw new G(x.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function IE(e,t,n,r){if(t===!0&&r===!0)throw new G(x.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Iu(e){if(!Y.isDocumentKey(e))throw new G(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function wu(e){if(Y.isDocumentKey(e))throw new G(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Yf(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function hl(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function xs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hl(e);throw new G(x.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(e,t){const n={typeString:e};return t&&(n.value=t),n}function qs(e,t){if(!Yf(e))throw new G(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(x.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-62135596800,bu=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(t){return Ct.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*bu);return new Ct(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Au)throw new G(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bu}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(qs(t,Ct._jsonSchema))return new Ct(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Au;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Ut("string",Ct._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(t){return new nt(t)}static min(){return new nt(new Ct(0,0))}static max(){return new nt(new Ct(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=-1;function wE(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new Sn(s,Y.empty(),t)}function AE(e){return new Sn(e.readTime,e.key,Ns)}class Sn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(nt.min(),Y.empty(),Ns)}static max(){return new Sn(nt.max(),Y.empty(),Ns)}}function bE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Y.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(e){if(e.code!==x.FAILED_PRECONDITION||e.message!==SE)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new V(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):V.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):V.reject(n)}static resolve(t){return new V(((n,r)=>{n(t)}))}static reject(t){return new V(((n,r)=>{r(t)}))}static waitFor(t){return new V(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(t){let n=V.resolve(!1);for(const r of t)n=n.next((s=>s?V.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new V(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new V(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function CE(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}co.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=-1;function uo(e){return e==null}function Bi(e){return e===0&&1/e==-1/0}function PE(e){return typeof e=="number"&&Number.isInteger(e)&&!Bi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="";function VE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Su(t)),t=DE(e.get(n),t);return Su(t)}function DE(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case Jf:n+="";break;default:n+=i}}return n}function Su(e){return e+Jf+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Zf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||Xt.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ui(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ui(this.root,t,this.comparator,!1)}getReverseIterator(){return new ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ui(this.root,t,this.comparator,!0)}}class ui{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Xt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Xt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cu(this.data.getIterator())}getIteratorFrom(t){return new Cu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class Cu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.fields=t,t.sort(Jt.comparator)}static empty(){return new Re([])}unionWith(t){let n=new Ht(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Re(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Cr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new td("Invalid base64 string: "+i):i}})(t);return new Zt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const xE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(e){if(_t(!!e,39018),typeof e=="string"){let t=0;const n=xE.exec(e);if(_t(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cn(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="server_timestamp",nd="__type__",rd="__previous_value__",sd="__local_write_time__";function dl(e){var n,r;return((r=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[nd])==null?void 0:r.stringValue)===ed}function ho(e){const t=e.mapValue.fields[rd];return dl(t)?ho(t):t}function Os(e){const t=Rn(e.mapValue.fields[sd].timestampValue);return new Ct(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,n,r,s,i,a,l,u,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const ji="(default)";class Ms{constructor(t,n){this.projectId=t,this.database=n||ji}static empty(){return new Ms("","")}get isDefaultDatabase(){return this.database===ji}isEqual(t){return t instanceof Ms&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="__type__",OE="__max__",hi={mapValue:{}},od="__vector__",$i="value";function Pn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?dl(e)?4:kE(e)?9007199254740991:ME(e)?10:11:tt(28295,{value:e})}function qe(e,t){if(e===t)return!0;const n=Pn(e);if(n!==Pn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Os(e).isEqual(Os(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Rn(s.timestampValue),l=Rn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Cn(s.bytesValue).isEqual(Cn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Ot(s.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ot(s.integerValue)===Ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ot(s.doubleValue),l=Ot(i.doubleValue);return a===l?Bi(a)===Bi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Cr(e.arrayValue.values||[],t.arrayValue.values||[],qe);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ru(a)!==Ru(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!qe(a[u],l[u])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function ks(e,t){return(e.values||[]).find((n=>qe(n,t)))!==void 0}function Pr(e,t){if(e===t)return 0;const n=Pn(e),r=Pn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Ot(i.integerValue||i.doubleValue),u=Ot(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(e,t);case 3:return Pu(e.timestampValue,t.timestampValue);case 4:return Pu(Os(e),Os(t));case 5:return Aa(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Cn(i),u=Cn(a);return l.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ct(l[f],u[f]);if(d!==0)return d}return ct(l.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ct(Ot(i.latitude),Ot(a.latitude));return l!==0?l:ct(Ot(i.longitude),Ot(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Vu(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var T,S,O,U;const l=i.fields||{},u=a.fields||{},f=(T=l[$i])==null?void 0:T.arrayValue,d=(S=u[$i])==null?void 0:S.arrayValue,m=ct(((O=f==null?void 0:f.values)==null?void 0:O.length)||0,((U=d==null?void 0:d.values)==null?void 0:U.length)||0);return m!==0?m:Vu(f,d)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===hi.mapValue&&a===hi.mapValue)return 0;if(i===hi.mapValue)return 1;if(a===hi.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const T=Aa(u[m],d[m]);if(T!==0)return T;const S=Pr(l[u[m]],f[d[m]]);if(S!==0)return S}return ct(u.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{he:n})}}function Pu(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Rn(e),r=Rn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Vu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Pr(n[s],r[s]);if(i)return i}return ct(n.length,r.length)}function Vr(e){return ba(e)}function ba(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Rn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Cn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return Y.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ba(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ba(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function vi(e){switch(Pn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ho(e);return t?16+vi(t):16;case 5:return 2*e.stringValue.length;case 6:return Cn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+vi(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return Jn(r.fields,((i,a)=>{s+=i.length+vi(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Sa(e){return!!e&&"integerValue"in e}function pl(e){return!!e&&"arrayValue"in e}function Du(e){return!!e&&"nullValue"in e}function xu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ii(e){return!!e&&"mapValue"in e}function ME(e){var n,r;return((r=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[id])==null?void 0:r.stringValue)===od}function Ts(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Jn(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Ts(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ts(e.arrayValue.values[n]);return t}return{...e}}function kE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===OE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ii(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ts(n)}setAll(t){let n=Jt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ts(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ii(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ii(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Jn(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ie(Ts(this.value))}}function ad(e){const t=[];return Jn(e.fields,((n,r)=>{const s=new Jt([n]);if(Ii(r)){const i=ad(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Re(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new oe(t,0,nt.min(),nt.min(),nt.min(),Ie.empty(),0)}static newFoundDocument(t,n,r,s){return new oe(t,1,n,nt.min(),r,s,0)}static newNoDocument(t,n){return new oe(t,2,n,nt.min(),nt.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new oe(t,3,n,nt.min(),nt.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof oe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t,n){this.position=t,this.inclusive=n}}function Nu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),n.key):r=Pr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ou(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n="asc"){this.field=t,this.dir=n}}function LE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{}class qt extends ld{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new UE(t,n,r):n==="array-contains"?new $E(t,r):n==="in"?new qE(t,r):n==="not-in"?new HE(t,r):n==="array-contains-any"?new zE(t,r):new qt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new BE(t,r):new jE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pr(n,this.value)):n!==null&&Pn(this.value)===Pn(n)&&this.matchesComparison(Pr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class He extends ld{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new He(t,n)}matches(t){return cd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cd(e){return e.op==="and"}function ud(e){return FE(e)&&cd(e)}function FE(e){for(const t of e.filters)if(t instanceof He)return!1;return!0}function Ra(e){if(e instanceof qt)return e.field.canonicalString()+e.op.toString()+Vr(e.value);if(ud(e))return e.filters.map((t=>Ra(t))).join(",");{const t=e.filters.map((n=>Ra(n))).join(",");return`${e.op}(${t})`}}function hd(e,t){return e instanceof qt?(function(r,s){return s instanceof qt&&r.op===s.op&&r.field.isEqual(s.field)&&qe(r.value,s.value)})(e,t):e instanceof He?(function(r,s){return s instanceof He&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&hd(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function fd(e){return e instanceof qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vr(n.value)}`})(e):e instanceof He?(function(n){return n.op.toString()+" {"+n.getFilters().map(fd).join(" ,")+"}"})(e):"Filter"}class UE extends qt{constructor(t,n,r){super(t,n,r),this.key=Y.fromName(r.referenceValue)}matches(t){const n=Y.comparator(t.key,this.key);return this.matchesComparison(n)}}class BE extends qt{constructor(t,n){super(t,"in",n),this.keys=dd("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class jE extends qt{constructor(t,n){super(t,"not-in",n),this.keys=dd("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function dd(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>Y.fromName(r.referenceValue)))}class $E extends qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return pl(n)&&ks(n.arrayValue,this.value)}}class qE extends qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ks(this.value.arrayValue,n)}}class HE extends qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ks(this.value.arrayValue,n)}}class zE extends qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!pl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ks(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Mu(e,t=null,n=[],r=[],s=null,i=null,a=null){return new KE(e,t,n,r,s,i,a)}function ml(e){const t=st(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Ra(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),uo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Vr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Vr(r))).join(",")),t.Te=n}return t.Te}function gl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!LE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ou(e.startAt,t.startAt)&&Ou(e.endAt,t.endAt)}function Ca(e){return Y.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WE(e,t,n,r,s,i,a,l){return new fo(e,t,n,r,s,i,a,l)}function pd(e){return new fo(e)}function ku(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function GE(e){return e.collectionGroup!==null}function vs(e){const t=st(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ht(Jt.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new Hi(i,r))})),n.has(Jt.keyField().canonicalString())||t.Ie.push(new Hi(Jt.keyField(),r))}return t.Ie}function Fe(e){const t=st(e);return t.Ee||(t.Ee=QE(t,vs(e))),t.Ee}function QE(e,t){if(e.limitType==="F")return Mu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Hi(s.field,i)}));const n=e.endAt?new qi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new qi(e.startAt.position,e.startAt.inclusive):null;return Mu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Pa(e,t,n){return new fo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function po(e,t){return gl(Fe(e),Fe(t))&&e.limitType===t.limitType}function md(e){return`${ml(Fe(e))}|lt:${e.limitType}`}function pr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>fd(s))).join(", ")}]`),uo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Vr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Vr(s))).join(",")),`Target(${r})`})(Fe(e))}; limitType=${e.limitType})`}function mo(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of vs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=Nu(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,vs(r),s)||r.endAt&&!(function(a,l,u){const f=Nu(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,vs(r),s))})(e,t)}function XE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gd(e){return(t,n)=>{let r=!1;for(const s of vs(e)){const i=YE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function YE(e,t,n){const r=e.field.isKeyField()?Y.comparator(t.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?Pr(u,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Jn(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return Zf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Vt(Y.comparator);function en(){return JE}const _d=new Vt(Y.comparator);function cs(...e){let t=_d;for(const n of e)t=t.insert(n.key,n);return t}function yd(e){let t=_d;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Hn(){return Is()}function Ed(){return Is()}function Is(){return new Zn((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ZE=new Vt(Y.comparator),tT=new Ht(Y.comparator);function ut(...e){let t=tT;for(const n of e)t=t.add(n);return t}const eT=new Ht(ct);function nT(){return eT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bi(t)?"-0":t}}function Td(e){return{integerValue:""+e}}function rT(e,t){return PE(t)?Td(t):_l(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this._=void 0}}function sT(e,t,n){return e instanceof zi?(function(s,i){const a={fields:{[nd]:{stringValue:ed},[sd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&dl(i)&&(i=ho(i)),i&&(a.fields[rd]=i),{mapValue:a}})(n,t):e instanceof Ls?Id(e,t):e instanceof Fs?wd(e,t):(function(s,i){const a=vd(s,i),l=Lu(a)+Lu(s.Ae);return Sa(a)&&Sa(s.Ae)?Td(l):_l(s.serializer,l)})(e,t)}function iT(e,t,n){return e instanceof Ls?Id(e,t):e instanceof Fs?wd(e,t):n}function vd(e,t){return e instanceof Ki?(function(r){return Sa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class zi extends go{}class Ls extends go{constructor(t){super(),this.elements=t}}function Id(e,t){const n=Ad(t);for(const r of e.elements)n.some((s=>qe(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Fs extends go{constructor(t){super(),this.elements=t}}function wd(e,t){let n=Ad(t);for(const r of e.elements)n=n.filter((s=>!qe(s,r)));return{arrayValue:{values:n}}}class Ki extends go{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Lu(e){return Ot(e.integerValue||e.doubleValue)}function Ad(e){return pl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function oT(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Ls&&s instanceof Ls||r instanceof Fs&&s instanceof Fs?Cr(r.elements,s.elements,qe):r instanceof Ki&&s instanceof Ki?qe(r.Ae,s.Ae):r instanceof zi&&s instanceof zi})(e.transform,t.transform)}class aT{constructor(t,n){this.version=t,this.transformResults=n}}class Xe{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Xe}static exists(t){return new Xe(void 0,t)}static updateTime(t){return new Xe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class _o{}function bd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Rd(e.key,Xe.none()):new Hs(e.key,e.data,Xe.none());{const n=e.data,r=Ie.empty();let s=new Ht(Jt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new tr(e.key,r,new Re(s.toArray()),Xe.none())}}function lT(e,t,n){e instanceof Hs?(function(s,i,a){const l=s.value.clone(),u=Uu(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof tr?(function(s,i,a){if(!wi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Uu(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Sd(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function ws(e,t,n,r){return e instanceof Hs?(function(i,a,l,u){if(!wi(i.precondition,a))return l;const f=i.value.clone(),d=Bu(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof tr?(function(i,a,l,u){if(!wi(i.precondition,a))return l;const f=Bu(i.fieldTransforms,u,a),d=a.data;return d.setAll(Sd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(e,t,n,r):(function(i,a,l){return wi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function cT(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=vd(r.transform,s||null);i!=null&&(n===null&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function Fu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cr(r,s,((i,a)=>oT(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hs extends _o{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tr extends _o{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Uu(e,t,n){const r=new Map;_t(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,iT(a,l,n[s]))}return r}function Bu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,sT(i,a,t))}return r}class Rd extends _o{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uT extends _o{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&lT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ws(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ws(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Ed();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=bd(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ut())}isEqual(t){return this.batchId===t.batchId&&Cr(this.mutations,t.mutations,((n,r)=>Fu(n,r)))&&Cr(this.baseMutations,t.baseMutations,((n,r)=>Fu(n,r)))}}class yl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){_t(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return ZE})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new yl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,ht;function pT(e){switch(e){case x.OK:return tt(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function Cd(e){if(e===void 0)return tn("GRPC error has no .code"),x.UNKNOWN;switch(e){case Ft.OK:return x.OK;case Ft.CANCELLED:return x.CANCELLED;case Ft.UNKNOWN:return x.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return x.INTERNAL;case Ft.UNAVAILABLE:return x.UNAVAILABLE;case Ft.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ft.NOT_FOUND:return x.NOT_FOUND;case Ft.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ft.ABORTED:return x.ABORTED;case Ft.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ft.DATA_LOSS:return x.DATA_LOSS;default:return tt(39323,{code:e})}}(ht=Ft||(Ft={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new vn([4294967295,4294967295],0);function ju(e){const t=mT().encode(e),n=new $f;return n.update(t),new Uint8Array(n.digest())}function $u(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new vn([n,r],0),new vn([s,i],0)]}class El{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new us(`Invalid padding: ${n}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new us(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=vn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(vn.fromNumber(r)));return s.compare(gT)===1&&(s=new vn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=ju(t),[r,s]=$u(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new El(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=ju(t),[r,s]=$u(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,zs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new yo(nt.min(),s,new Vt(ct),en(),ut())}}class zs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new zs(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class Pd{constructor(t,n){this.targetId=t,this.Ce=n}}class Vd{constructor(t,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class qu{constructor(){this.ve=0,this.Fe=Hu(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),r=ut();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new zs(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Hu()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _T{constructor(t){this.Ge=t,this.ze=new Map,this.je=en(),this.Je=fi(),this.He=fi(),this.Ye=new Vt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ca(i))if(r===0){const a=new Y(i.path);this.et(n,a,oe.newNoDocument(a,nt.min()))}else _t(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Cn(r).toUint8Array()}catch(u){if(u instanceof td)return Rr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new El(a,s,i)}catch(u){return Rr(u instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Ca(l.target)){const u=new Y(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,oe.newNoDocument(u,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=ut();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new yo(t,n,this.Ye,this.je,r);return this.je=en(),this.Je=fi(),this.He=fi(),this.Ye=new Vt(ct),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new qu,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ht(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ht(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new qu),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function fi(){return new Vt(Y.comparator)}function Hu(){return new Vt(Y.comparator)}const yT={asc:"ASCENDING",desc:"DESCENDING"},ET={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TT={and:"AND",or:"OR"};class vT{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Va(e,t){return e.useProto3Json||uo(t)?t:{value:t}}function Wi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function IT(e,t){return Wi(e,t.toTimestamp())}function Ue(e){return _t(!!e,49232),nt.fromTimestamp((function(n){const r=Rn(n);return new Ct(r.seconds,r.nanos)})(e))}function Tl(e,t){return Da(e,t).canonicalString()}function Da(e,t){const n=(function(s){return new Rt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function xd(e){const t=Rt.fromString(e);return _t(Ld(t),10190,{key:t.toString()}),t}function xa(e,t){return Tl(e.databaseId,t.path)}function ea(e,t){const n=xd(t);if(n.get(1)!==e.databaseId.projectId)throw new G(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new G(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Y(Od(n))}function Nd(e,t){return Tl(e.databaseId,t)}function wT(e){const t=xd(e);return t.length===4?Rt.emptyPath():Od(t)}function Na(e){return new Rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Od(e){return _t(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function zu(e,t,n){return{name:xa(e,t),fields:n.value.mapValue.fields}}function AT(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(_t(d===void 0||typeof d=="string",58123),Zt.fromBase64String(d||"")):(_t(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Zt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?x.UNKNOWN:Cd(f.code);return new G(d,f.message||"")})(a);n=new Vd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ea(e,r.document.name),i=Ue(r.document.updateTime),a=r.document.createTime?Ue(r.document.createTime):nt.min(),l=new Ie({mapValue:{fields:r.document.fields}}),u=oe.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Ai(f,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ea(e,r.document),i=r.readTime?Ue(r.readTime):nt.min(),a=oe.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ai([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ea(e,r.document),i=r.removedTargetIds||[];n=new Ai([],i,s,null)}else{if(!("filter"in t))return tt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new dT(s,i),l=r.targetId;n=new Pd(l,a)}}return n}function bT(e,t){let n;if(t instanceof Hs)n={update:zu(e,t.key,t.value)};else if(t instanceof Rd)n={delete:xa(e,t.key)};else if(t instanceof tr)n={update:zu(e,t.key,t.data),updateMask:OT(t.fieldMask)};else{if(!(t instanceof uT))return tt(16599,{Vt:t.type});n={verify:xa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof zi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ls)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ki)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:IT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function ST(e,t){return e&&e.length>0?(_t(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Ue(s.updateTime):Ue(i);return a.isEqual(nt.min())&&(a=Ue(i)),new aT(a,s.transformResults||[])})(n,t)))):[]}function RT(e,t){return{documents:[Nd(e,t.path)]}}function CT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Nd(e,s);const i=(function(f){if(f.length!==0)return kd(He.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(T){return{field:mr(T.field),direction:DT(T.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Va(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:n,parent:s}}function PT(e){let t=wT(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_t(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(m){const T=Md(m);return T instanceof He&&ud(T)?T.getFilters():[T]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((T=>(function(O){return new Hi(gr(O.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(T)))})(n.orderBy));let l=null;n.limit&&(l=(function(m){let T;return T=typeof m=="object"?m.value:m,uo(T)?null:T})(n.limit));let u=null;n.startAt&&(u=(function(m){const T=!!m.before,S=m.values||[];return new qi(S,T)})(n.startAt));let f=null;return n.endAt&&(f=(function(m){const T=!m.before,S=m.values||[];return new qi(S,T)})(n.endAt)),WE(t,s,a,i,l,"F",u,f)}function VT(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Md(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gr(n.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gr(n.unaryFilter.field);return qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gr(n.unaryFilter.field);return qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=gr(n.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return qt.create(gr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return He.create(n.compositeFilter.filters.map((r=>Md(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function DT(e){return yT[e]}function xT(e){return ET[e]}function NT(e){return TT[e]}function mr(e){return{fieldPath:e.canonicalString()}}function gr(e){return Jt.fromServerFormat(e.fieldPath)}function kd(e){return e instanceof qt?(function(n){if(n.op==="=="){if(xu(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NAN"}};if(Du(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xu(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NAN"}};if(Du(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(n.field),op:xT(n.op),value:n.value}}})(e):e instanceof He?(function(n){const r=n.getFilters().map((s=>kd(s)));return r.length===1?r[0]:{compositeFilter:{op:NT(n.op),filters:r}}})(e):tt(54877,{filter:e})}function OT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Ld(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,n,r,s,i=nt.min(),a=nt.min(),l=Zt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new gn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t){this.yt=t}}function kT(e){const t=PT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Pa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.Cn=new FT}addToCollectionParentIndex(t,n){return this.Cn.add(n),V.resolve()}getCollectionParents(t,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return V.resolve()}deleteFieldIndex(t,n){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,n){return V.resolve()}getDocumentsMatchingTarget(t,n){return V.resolve(null)}getIndexType(t,n){return V.resolve(0)}getFieldIndexes(t,n){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,n){return V.resolve(Sn.min())}getMinOffsetFromCollectionGroup(t,n){return V.resolve(Sn.min())}updateCollectionGroup(t,n,r){return V.resolve()}updateIndexEntries(t,n){return V.resolve()}}class FT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ht(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fd=41943040;class de{static withCacheSize(t){return new de(t,de.DEFAULT_COLLECTION_PERCENTILE,de.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */de.DEFAULT_COLLECTION_PERCENTILE=10,de.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,de.DEFAULT=new de(Fd,de.DEFAULT_COLLECTION_PERCENTILE,de.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),de.DISABLED=new de(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Dr(0)}static cr(){return new Dr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="LruGarbageCollector",UT=1048576;function Gu([e,t],[n,r]){const s=ct(e,n);return s===0?ct(t,r):s}class BT{constructor(t){this.Ir=t,this.buffer=new Ht(Gu),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Gu(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(Wu,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lr(n)?H(Wu,"Ignoring IndexedDB error during garbage collection: ",n):await kr(n)}await this.Vr(3e5)}))}}class $T{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return V.resolve(co.ce);const r=new BT(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Ku)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ku):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,u,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s)))).next((m=>(r=m,l=Date.now(),this.removeTargets(t,r,n)))).next((m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((m=>(f=Date.now(),dr()<=ft.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function qT(e,t){return new $T(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.changes=new Zn((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,oe.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&ws(r.mutation,s,Re.empty(),Ct.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ut()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ut()){const s=Hn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=cs();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=Hn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ut())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=en();const a=Is(),l=(function(){return Is()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof tr)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),ws(d.mutation,f,d.mutation.getFieldMask(),Ct.now())):a.set(f.key,Re.empty())})),this.recalculateAndSaveOverlays(t,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>l.set(f,new zT(d,a.get(f)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=Is();let s=new Vt(((a,l)=>a-l)),i=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||Re.empty();d=l.applyToLocalView(f,d),r.set(u,d);const m=(s.get(l.batchId)||ut()).add(u);s=s.insert(l.batchId,m)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,m=Ed();d.forEach((T=>{if(!i.has(T)){const S=bd(n.get(T),r.get(T));S!==null&&m.set(T,S),i=i.add(T)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return V.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):GE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):V.resolve(Hn());let l=Ns,u=i;return a.next((f=>V.forEach(f,((d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next((T=>{u=u.insert(d,T)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,u,f,ut()))).next((d=>({batchId:l,changes:yd(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Y(n)).next((r=>{let s=cs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=cs();return this.indexManager.getCollectionParents(t,i).next((l=>V.forEach(l,(u=>{const f=(function(m,T){return new fo(T,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((m,T)=>{a=a.insert(m,T)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,oe.newInvalidDocument(d)))}));let l=cs();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&ws(d.mutation,f,Re.empty(),Ct.now()),mo(n,f)&&(l=l.insert(u,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ue(s.createTime)}})(n)),V.resolve()}getNamedQuery(t,n){return V.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:kT(s.bundledQuery),readTime:Ue(s.readTime)}})(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.overlays=new Vt(Y.comparator),this.qr=new Map}getOverlay(t,n){return V.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Hn();return V.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),V.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(t,n,r){const s=Hn(),i=n.length+1,a=new Y(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Vt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Hn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Hn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return V.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fT(n,r));let i=this.qr.get(n);i===void 0&&(i=ut(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.Qr=new Ht(Wt.$r),this.Ur=new Ht(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Wt(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Wt(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new Y(new Rt([])),r=new Wt(n,t),s=new Wt(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Y(new Rt([])),r=new Wt(n,t),s=new Wt(n,t+1);let i=ut();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new Wt(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Wt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Y.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||Y.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Wt.$r)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Wt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?fl:this.tr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Wt(n,0),s=new Wt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(ct);return n.forEach((s=>{const i=new Wt(s,0),a=new Wt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new Wt(new Y(i),0);let l=new Ht(ct);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)}),a),V.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){_t(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,(s=>{const i=new Wt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Wt(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t){this.ri=t,this.docs=(function(){return new Vt(Y.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():oe.newInvalidDocument(n))}getEntries(t,n){let r=en();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():oe.newInvalidDocument(s))})),V.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=en();const a=n.path,l=new Y(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||bE(AE(d),r)<=0||(s.has(d.key)||mo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ii(t,n){return V.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new JT(this)}getSize(t){return V.resolve(this.size)}}class JT extends HT{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),V.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(t){this.persistence=t,this.si=new Zn((n=>ml(n)),gl),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new vl,this.targetCount=0,this.ai=Dr.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Dr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(t,n){return this.Pr(n),V.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),V.waitFor(i).next((()=>s))}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),V.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(t,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,n){this.ui={},this.overlays={},this.ci=new co(0),this.li=!1,this.li=!0,this.hi=new QT,this.referenceDelegate=t(this),this.Pi=new ZT(this),this.indexManager=new LT,this.remoteDocumentCache=(function(s){return new YT(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new MT(n),this.Ii=new WT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new GT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new XT(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new tv(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return V.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class tv extends RE{constructor(t){super(),this.currentSequenceNumber=t}}class Il{constructor(t){this.persistence=t,this.Ri=new vl,this.Vi=null}static mi(t){return new Il(t)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,(r=>{const s=Y.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,nt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Gi{constructor(t,n){this.persistence=t,this.pi=new Zn((r=>VE(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=qT(this,n)}static mi(t,n){return new Gi(t,n)}Ei(){}di(t){return V.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return V.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?V.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,nt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),V.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),V.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),V.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=vi(t.data.value)),n}br(t,n,r){return V.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=ut(),s=ut();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new wl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return G_()?8:CE(K_())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new ev;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(dr()<=ft.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",pr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(dr()<=ft.DEBUG&&H("QueryEngine","Query:",pr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(dr()<=ft.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",pr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fe(n))):V.resolve())}ys(t,n){if(ku(n))return V.resolve(null);let r=Fe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Pa(n,null,"F"),r=Fe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ut(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(t,Pa(n,null,"F")):this.vs(t,f,n,u)}))))})))))}ws(t,n,r,s){return ku(n)||s.isEqual(nt.min())?V.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?V.resolve(null):(dr()<=ft.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pr(n)),this.vs(t,a,n,wE(s,Ns)).next((l=>l)))}))}Ds(t,n){let r=new Ht(gd(t));return n.forEach(((s,i)=>{mo(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return dr()<=ft.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",pr(n)),this.ps.getDocumentsMatchingQuery(t,n,Sn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="LocalStore",rv=3e8;class sv{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Vt(ct),this.xs=new Zn((i=>ml(i)),gl),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function iv(e,t,n,r){return new sv(e,t,n,r)}async function Bd(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=ut();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function ov(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const m=f.batch,T=m.keys();let S=V.resolve();return T.forEach((O=>{S=S.next((()=>d.getEntry(u,O))).next((U=>{const B=f.docVersions.get(O);_t(B!==null,48541),U.version.compareTo(B)<0&&(m.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),d.addEntry(U)))}))})),S.next((()=>l.mutationQueue.removeMutationBatch(u,m)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=ut();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function jd(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function av(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((d,m)=>{const T=s.get(m);if(!T)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,m).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,m))));let S=T.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?S=S.withResumeToken(Zt.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(m,S),(function(U,B,K){return U.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=rv?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(T,S,d)&&l.push(n.Pi.updateTargetData(i,S))}));let u=en(),f=ut();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(lv(i,a,t.documentUpdates).next((d=>{u=d.ks,f=d.qs}))),!r.isEqual(nt.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return V.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.Ms=s,i)))}function lv(e,t,n){let r=ut(),s=ut();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=en();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(nt.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Al,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function cv(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=fl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function uv(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new gn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function Oa(e,t,n){const r=st(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Lr(a))throw a;H(Al,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Qu(e,t,n){const r=st(e);let s=nt.min(),i=ut();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const m=st(u),T=m.xs.get(d);return T!==void 0?V.resolve(m.Ms.get(T)):m.Pi.getTargetData(f,d)})(r,a,Fe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:nt.min(),n?i:ut()))).next((l=>(hv(r,XE(t),l),{documents:l,Qs:i})))))}function hv(e,t,n){let r=e.Os.get(t)||nt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class Xu{constructor(){this.activeTargetIds=nT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fv{constructor(){this.Mo=new Xu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Xu,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="ConnectivityMonitor";class Ju{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Yu,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(Yu,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di=null;function Ma(){return di===null?di=(function(){return 268435456+Math.round(2147483648*Math.random())})():di++,"0x"+di.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RestConnection",pv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mv{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ji?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=Ma(),l=this.zo(t,n.toUriEncodedString());H(na,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:f}=new URL(l),d=al(f);return this.Jo(t,l,u,r,d).then((m=>(H(na,`Received RPC '${t}' ${a}: `,m),m)),(m=>{throw Rr(na,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=pv[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne="WebChannelConnection";class _v extends mv{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Ma();return new Promise(((l,u)=>{const f=new qf;f.setWithCredentials(!0),f.listenOnce(Hf.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ti.NO_ERROR:const m=f.getResponseJson();H(ne,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ti.TIMEOUT:H(ne,`RPC '${t}' ${a} timed out`),u(new G(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ti.HTTP_ERROR:const T=f.getStatus();if(H(ne,`RPC '${t}' ${a} failed with status:`,T,"response text:",f.getResponseText()),T>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const O=S==null?void 0:S.error;if(O&&O.status&&O.message){const U=(function(K){const W=K.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(W)>=0?W:x.UNKNOWN})(O.status);u(new G(U,O.message))}else u(new G(x.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new G(x.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{H(ne,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(ne,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}T_(t,n,r){const s=Ma(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Wf(),l=Kf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(ne,`Creating RPC '${t}' stream ${s}: ${d}`,u);const m=a.createWebChannel(d,u);this.I_(m);let T=!1,S=!1;const O=new gv({Yo:B=>{S?H(ne,`Not sending because RPC '${t}' stream ${s} is closed:`,B):(T||(H(ne,`Opening RPC '${t}' stream ${s} transport.`),m.open(),T=!0),H(ne,`RPC '${t}' stream ${s} sending:`,B),m.send(B))},Zo:()=>m.close()}),U=(B,K,W)=>{B.listen(K,(Q=>{try{W(Q)}catch(z){setTimeout((()=>{throw z}),0)}}))};return U(m,ls.EventType.OPEN,(()=>{S||(H(ne,`RPC '${t}' stream ${s} transport opened.`),O.o_())})),U(m,ls.EventType.CLOSE,(()=>{S||(S=!0,H(ne,`RPC '${t}' stream ${s} transport closed`),O.a_(),this.E_(m))})),U(m,ls.EventType.ERROR,(B=>{S||(S=!0,Rr(ne,`RPC '${t}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),O.a_(new G(x.UNAVAILABLE,"The operation could not be completed")))})),U(m,ls.EventType.MESSAGE,(B=>{var K;if(!S){const W=B.data[0];_t(!!W,16349);const Q=W,z=(Q==null?void 0:Q.error)||((K=Q[0])==null?void 0:K.error);if(z){H(ne,`RPC '${t}' stream ${s} received error:`,z);const rt=z.status;let yt=(function(_){const I=Ft[_];if(I!==void 0)return Cd(I)})(rt),w=z.message;yt===void 0&&(yt=x.INTERNAL,w="Unknown error status: "+rt+" with message "+z.message),S=!0,O.a_(new G(yt,w)),m.close()}else H(ne,`RPC '${t}' stream ${s} received:`,W),O.u_(W)}})),U(l,zf.STAT_EVENT,(B=>{B.stat===wa.PROXY?H(ne,`RPC '${t}' stream ${s} detected buffering proxy`):B.stat===wa.NOPROXY&&H(ne,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function ra(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(e){return new vT(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="PersistentStream";class qd{constructor(t,n,r,s,i,a,l,u){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $d(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(tn(n.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new G(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return H(Zu,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(H(Zu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yv extends qd{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=AT(this.serializer,t),r=(function(i){if(!("targetChange"in i))return nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?nt.min():a.readTime?Ue(a.readTime):nt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=Na(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=Ca(u)?{documents:RT(i,u)}:{query:CT(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Dd(i,a.resumeToken);const f=Va(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(nt.min())>0){l.readTime=Wi(i,a.snapshotVersion.toTimestamp());const f=Va(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=VT(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=Na(this.serializer),n.removeTarget=t,this.q_(n)}}class Ev extends qd{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return _t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ST(t.writeResults,t.commitTime),r=Ue(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=Na(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>bT(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{}class vv extends Tv{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,Da(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(x.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,Da(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(x.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Iv{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="RemoteStore";class wv{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{er(this)&&(H(Qn,"Restarting streams for network reachability change."),await(async function(u){const f=st(u);f.Ea.add(4),await Ks(f),f.Ra.set("Unknown"),f.Ea.delete(4),await To(f)})(this))}))})),this.Ra=new Iv(r,s)}}async function To(e){if(er(e))for(const t of e.da)await t(!0)}async function Ks(e){for(const t of e.da)await t(!1)}function Hd(e,t){const n=st(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Cl(n)?Rl(n):Fr(n).O_()&&Sl(n,t))}function bl(e,t){const n=st(e),r=Fr(n);n.Ia.delete(t),r.O_()&&zd(n,t),n.Ia.size===0&&(r.O_()?r.L_():er(n)&&n.Ra.set("Unknown"))}function Sl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fr(e).Y_(t)}function zd(e,t){e.Va.Ue(t),Fr(e).Z_(t)}function Rl(e){e.Va=new _T({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Fr(e).start(),e.Ra.ua()}function Cl(e){return er(e)&&!Fr(e).x_()&&e.Ia.size>0}function er(e){return st(e).Ea.size===0}function Kd(e){e.Va=void 0}async function Av(e){e.Ra.set("Online")}async function bv(e){e.Ia.forEach(((t,n)=>{Sl(e,t)}))}async function Sv(e,t){Kd(e),Cl(e)?(e.Ra.ha(t),Rl(e)):e.Ra.set("Unknown")}async function Rv(e,t,n){if(e.Ra.set("Online"),t instanceof Vd&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){H(Qn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Qi(e,r)}else if(t instanceof Ai?e.Va.Ze(t):t instanceof Pd?e.Va.st(t):e.Va.tt(t),!n.isEqual(nt.min()))try{const r=await jd(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(f);d&&i.Ia.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(Zt.EMPTY_BYTE_STRING,d.snapshotVersion)),zd(i,u);const m=new gn(d.target,u,f,d.sequenceNumber);Sl(i,m)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Qn,"Failed to raise snapshot:",r),await Qi(e,r)}}async function Qi(e,t,n){if(!Lr(t))throw t;e.Ea.add(1),await Ks(e),e.Ra.set("Offline"),n||(n=()=>jd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Qn,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await To(e)}))}function Wd(e,t){return t().catch((n=>Qi(e,n,t)))}async function vo(e){const t=st(e),n=Vn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:fl;for(;Cv(t);)try{const s=await cv(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,Pv(t,s)}catch(s){await Qi(t,s)}Gd(t)&&Qd(t)}function Cv(e){return er(e)&&e.Ta.length<10}function Pv(e,t){e.Ta.push(t);const n=Vn(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Gd(e){return er(e)&&!Vn(e).x_()&&e.Ta.length>0}function Qd(e){Vn(e).start()}async function Vv(e){Vn(e).ra()}async function Dv(e){const t=Vn(e);for(const n of e.Ta)t.ea(n.mutations)}async function xv(e,t,n){const r=e.Ta.shift(),s=yl.from(r,t,n);await Wd(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await vo(e)}async function Nv(e,t){t&&Vn(e).X_&&await(async function(r,s){if((function(a){return pT(a)&&a!==x.ABORTED})(s.code)){const i=r.Ta.shift();Vn(r).B_(),await Wd(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await vo(r)}})(e,t),Gd(e)&&Qd(e)}async function th(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Qn,"RemoteStore received new credentials");const r=er(n);n.Ea.add(3),await Ks(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await To(n)}async function Ov(e,t){const n=st(e);t?(n.Ea.delete(2),await To(n)):t||(n.Ea.add(2),await Ks(n),n.Ra.set("Unknown"))}function Fr(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.sa(),new yv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:Av.bind(null,e),t_:bv.bind(null,e),r_:Sv.bind(null,e),H_:Rv.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Cl(e)?Rl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Kd(e))}))),e.ma}function Vn(e){return e.fa||(e.fa=(function(n,r,s){const i=st(n);return i.sa(),new Ev(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Vv.bind(null,e),r_:Nv.bind(null,e),ta:Dv.bind(null,e),na:xv.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await vo(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Qn,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Pl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vl(e,t){if(tn("AsyncQueue",`${t}: ${e}`),Lr(e))return new G(x.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static emptySet(t){return new wr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=cs(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof wr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new wr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.ga=new Vt(Y.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):tt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class xr{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new xr(t,n,wr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&po(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class kv{constructor(){this.queries=nh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=nh(),i.forEach(((a,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new G(x.ABORTED,"Firestore shutting down"))}}function nh(){return new Zn((e=>md(e)),po)}async function Lv(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new Mv,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Vl(a,`Initialization of query '${pr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Dl(n)}async function Fv(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Uv(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Dl(n)}function Bv(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Dl(e){e.Ca.forEach((t=>{t.next()}))}var ka,rh;(rh=ka||(ka={})).Ma="default",rh.Cache="cache";class jv{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new xr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=xr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ka.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t){this.key=t}}class Yd{constructor(t){this.key=t}}class $v{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=gd(t),this.tu=new wr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new eh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,m)=>{const T=s.get(d),S=mo(this.query,m)?m:null,O=!!T&&this.mutatedKeys.has(T.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let B=!1;T&&S?T.data.isEqual(S.data)?O!==U&&(r.track({type:3,doc:S}),B=!0):this.su(T,S)||(r.track({type:2,doc:S}),B=!0,(u&&this.eu(S,u)>0||f&&this.eu(S,f)<0)&&(l=!0)):!T&&S?(r.track({type:0,doc:S}),B=!0):T&&!S&&(r.track({type:1,doc:T}),B=!0,(u||f)&&(l=!0)),B&&(S?(a=a.add(S),i=U?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,m)=>(function(S,O){const U=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:B})}};return U(S)-U(O)})(d.type,m.type)||this.eu(d.doc,m.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new xr(this.query,t.tu,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new Yd(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new Xd(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return xr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xl="SyncEngine";class qv{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Hv{constructor(t){this.key=t,this.hu=!1}}class zv{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Zn((l=>md(l)),po),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Y.comparator),this.Au=new Map,this.Ru=new vl,this.Vu={},this.mu=new Map,this.fu=Dr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Kv(e,t,n=!0){const r=rp(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Jd(r,t,n,!0),s}async function Wv(e,t){const n=rp(e);await Jd(n,t,!0,!1)}async function Jd(e,t,n,r){const s=await uv(e.localStore,Fe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Gv(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Hd(e.remoteStore,s),l}async function Gv(e,t,n,r,s){e.pu=(m,T,S)=>(async function(U,B,K,W){let Q=B.view.ru(K);Q.Cs&&(Q=await Qu(U.localStore,B.query,!1).then((({documents:w})=>B.view.ru(w,Q))));const z=W&&W.targetChanges.get(B.targetId),rt=W&&W.targetMismatches.get(B.targetId)!=null,yt=B.view.applyChanges(Q,U.isPrimaryClient,z,rt);return ih(U,B.targetId,yt.au),yt.snapshot})(e,m,T,S);const i=await Qu(e.localStore,t,!0),a=new $v(t,i.Qs),l=a.ru(i.documents),u=zs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);ih(e,n,f.au);const d=new qv(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function Qv(e,t,n){const r=st(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!po(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Oa(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bl(r.remoteStore,s.targetId),La(r,s.targetId)})).catch(kr)):(La(r,s.targetId),await Oa(r.localStore,s.targetId,!0))}async function Xv(e,t){const n=st(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bl(n.remoteStore,r.targetId))}async function Yv(e,t,n){const r=sI(e);try{const s=await(function(a,l){const u=st(a),f=Ct.now(),d=l.reduce(((S,O)=>S.add(O.key)),ut());let m,T;return u.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let O=en(),U=ut();return u.Ns.getEntries(S,d).next((B=>{O=B,O.forEach(((K,W)=>{W.isValidDocument()||(U=U.add(K))}))})).next((()=>u.localDocuments.getOverlayedDocuments(S,O))).next((B=>{m=B;const K=[];for(const W of l){const Q=cT(W,m.get(W.key).overlayedDocument);Q!=null&&K.push(new tr(W.key,Q,ad(Q.value.mapValue),Xe.exists(!0)))}return u.mutationQueue.addMutationBatch(S,f,K,l)})).next((B=>{T=B;const K=B.applyToLocalDocumentSet(m,U);return u.documentOverlayCache.saveOverlays(S,B.batchId,K)}))})).then((()=>({batchId:T.batchId,changes:yd(m)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Vt(ct)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ws(r,s.changes),await vo(r.remoteStore)}catch(s){const i=Vl(s,"Failed to persist write");n.reject(i)}}async function Zd(e,t){const n=st(e);try{const r=await av(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?_t(a.hu,14607):s.removedDocuments.size>0&&(_t(a.hu,42227),a.hu=!1))})),await Ws(n,r,t)}catch(r){await kr(r)}}function sh(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=st(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,m)=>{for(const T of m.Sa)T.va(l)&&(f=!0)})),f&&Dl(u)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Jv(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new Vt(Y.comparator);a=a.insert(i,oe.newNoDocument(i,nt.min()));const l=ut().add(i),u=new yo(nt.min(),new Map,new Vt(ct),a,l);await Zd(r,u),r.du=r.du.remove(i),r.Au.delete(t),Nl(r)}else await Oa(r.localStore,t,!1).then((()=>La(r,t,n))).catch(kr)}async function Zv(e,t){const n=st(e),r=t.batch.batchId;try{const s=await ov(n.localStore,t);ep(n,r,null),tp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ws(n,s)}catch(s){await kr(s)}}async function tI(e,t,n){const r=st(e);try{const s=await(function(a,l){const u=st(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((m=>(_t(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(f,m)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);ep(r,t,n),tp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ws(r,s)}catch(s){await kr(s)}}function tp(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function ep(e,t,n){const r=st(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function La(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||np(e,r)}))}function np(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(bl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Nl(e))}function ih(e,t,n){for(const r of n)r instanceof Xd?(e.Ru.addReference(r.key,t),eI(e,r)):r instanceof Yd?(H(xl,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||np(e,r.key)):tt(19791,{wu:r})}function eI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(H(xl,"New document in limbo: "+n),e.Eu.add(r),Nl(e))}function Nl(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Y(Rt.fromString(t)),r=e.fu.next();e.Au.set(r,new Hv(n)),e.du=e.du.insert(n,r),Hd(e.remoteStore,new gn(Fe(pd(n.path)),r,"TargetPurposeLimboResolution",co.ce))}}async function Ws(e,t,n){const r=st(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{a.push(r.pu(u,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){s.push(f);const m=wl.As(u.targetId,f);i.push(m)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(u,f){const d=st(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>V.forEach(f,(T=>V.forEach(T.Es,(S=>d.persistence.referenceDelegate.addReference(m,T.targetId,S))).next((()=>V.forEach(T.ds,(S=>d.persistence.referenceDelegate.removeReference(m,T.targetId,S)))))))))}catch(m){if(!Lr(m))throw m;H(Al,"Failed to update sequence numbers: "+m)}for(const m of f){const T=m.targetId;if(!m.fromCache){const S=d.Ms.get(T),O=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(O);d.Ms=d.Ms.insert(T,U)}}})(r.localStore,i))}async function nI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H(xl,"User change. New user:",t.toKey());const r=await Bd(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((u=>{u.reject(new G(x.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ws(n,r.Ls)}}function rI(e,t){const n=st(e),r=n.Au.get(t);if(r&&r.hu)return ut().add(r.key);{let s=ut();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function rp(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jv.bind(null,t),t.Pu.H_=Uv.bind(null,t.eventManager),t.Pu.yu=Bv.bind(null,t.eventManager),t}function sI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tI.bind(null,t),t}class Xi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Eo(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return iv(this.persistence,new nv,t.initialUser,this.serializer)}Cu(t){return new Ud(Il.mi,this.serializer)}Du(t){return new fv}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xi.provider={build:()=>new Xi};class iI extends Xi{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){_t(this.persistence.referenceDelegate instanceof Gi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jT(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?de.withCacheSize(this.cacheSizeBytes):de.DEFAULT;return new Ud((r=>Gi.mi(r,n)),this.serializer)}}class Fa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nI.bind(null,this.syncEngine),await Ov(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new kv})()}createDatastore(t){const n=Eo(t.databaseInfo.databaseId),r=(function(i){return new _v(i)})(t.databaseInfo);return(function(i,a,l,u){return new vv(i,a,l,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new wv(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>sh(this.syncEngine,n,0)),(function(){return Ju.v()?new Ju:new dv})())}createSyncEngine(t,n){return(function(s,i,a,l,u,f,d){const m=new zv(s,i,a,l,u,f);return d&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Qn,"RemoteStore shutting down."),i.Ea.add(5),await Ks(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Fa.provider={build:()=>new Fa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):tn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="FirestoreClient";class aI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=se.UNAUTHENTICATED,this.clientId=ul.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Dn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Dn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Vl(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function sa(e,t){e.asyncQueue.verifyOperationInProgress(),H(Dn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Bd(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function oh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await lI(e);H(Dn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>th(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>th(t.remoteStore,s))),e._onlineComponents=t}async function lI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Dn,"Using user provided OfflineComponentProvider");try{await sa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===x.FAILED_PRECONDITION||s.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Rr("Error using user provided cache. Falling back to memory cache: "+n),await sa(e,new Xi)}}else H(Dn,"Using default OfflineComponentProvider"),await sa(e,new iI(void 0));return e._offlineComponents}async function sp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Dn,"Using user provided OnlineComponentProvider"),await oh(e,e._uninitializedComponentsProvider._online)):(H(Dn,"Using default OnlineComponentProvider"),await oh(e,new Fa))),e._onlineComponents}function cI(e){return sp(e).then((t=>t.syncEngine))}async function uI(e){const t=await sp(e),n=t.eventManager;return n.onListen=Kv.bind(null,t.syncEngine),n.onUnlisten=Qv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Wv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Xv.bind(null,t.syncEngine),n}function hI(e,t,n={}){const r=new In;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new oI({next:T=>{d.Nu(),a.enqueueAndForget((()=>Fv(i,m))),T.fromCache&&u.source==="server"?f.reject(new G(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),m=new jv(l,d,{includeMetadataChanges:!0,qa:!0});return Lv(i,m)})(await uI(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="firestore.googleapis.com",lh=!0;class ch{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new G(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=op,this.ssl=lh}else this.host=t.host,this.ssl=t.ssl??lh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Fd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UT)throw new G(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}IE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ip(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Io{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ch({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new G(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ch(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fE;switch(r.type){case"firstParty":return new gE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ah.get(n);r&&(H("ComponentProvider","Removing Datastore"),ah.delete(n),r.terminate())})(this),Promise.resolve()}}function fI(e,t,n,r={}){var f;e=xs(e,Io);const s=al(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(j_(`https://${l}`),z_("Firestore",!0)),i.host!==op&&i.host!==l&&Rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Li(u,a)&&(e._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=se.MOCK_USER;else{d=$_(r.mockUserToken,(f=e._app)==null?void 0:f.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new G(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new se(T)}e._authCredentials=new dE(new Qf(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new wo(this.firestore,t,this._query)}}class Gt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Gt(this.firestore,t,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(qs(n,Gt._jsonSchema))return new Gt(t,r||null,new Y(Rt.fromString(n.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Ut("string",Gt._jsonSchemaVersion),referencePath:Ut("string")};class wn extends wo{constructor(t,n,r){super(t,n,pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Gt(this.firestore,null,new Y(t))}withConverter(t){return new wn(this.firestore,t,this._path)}}function dI(e,t,...n){if(e=Ps(e),Xf("collection","path",t),e instanceof Io){const r=Rt.fromString(t,...n);return wu(r),new wn(e,null,r)}{if(!(e instanceof Gt||e instanceof wn))throw new G(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return wu(r),new wn(e.firestore,null,r)}}function pI(e,t,...n){if(e=Ps(e),arguments.length===1&&(t=ul.newId()),Xf("doc","path",t),e instanceof Io){const r=Rt.fromString(t,...n);return Iu(r),new Gt(e,null,new Y(r))}{if(!(e instanceof Gt||e instanceof wn))throw new G(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Iu(r),new Gt(e.firestore,e instanceof wn?e.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="AsyncQueue";class hh{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $d(this,"async_queue_retry"),this._c=()=>{const r=ra();r&&H(uh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=ra();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=ra();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new In;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Lr(t))throw t;H(uh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,tn("INTERNAL UNHANDLED ERROR: ",fh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=Pl.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&tt(47125,{Pc:fh(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function fh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ol extends Io{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new hh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new hh(t),this._firestoreClient=void 0,await t}}}function mI(e,t){const n=typeof e=="object"?e:eE(),r=typeof e=="string"?e:ji,s=Xy(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=U_("firestore");i&&fI(s,...i)}return s}function ap(e){if(e._terminated)throw new G(x.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||gI(e),e._firestoreClient}function gI(e){var r,s,i;const t=e._freezeSettings(),n=(function(l,u,f,d){return new NE(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ip(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((r=e._app)==null?void 0:r.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new aI(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this._byteString=t}static fromBase64String(t){try{return new we(Zt.fromBase64String(t))}catch(n){throw new G(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new we(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:we._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(qs(t,we._jsonSchema))return we.fromBase64String(t.bytes)}}we._jsonSchemaVersion="firestore/bytes/1.0",we._jsonSchema={type:Ut("string",we._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new G(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Be._jsonSchemaVersion}}static fromJSON(t){if(qs(t,Be._jsonSchema))return new Be(t.latitude,t.longitude)}}Be._jsonSchemaVersion="firestore/geoPoint/1.0",Be._jsonSchema={type:Ut("string",Be._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:je._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(qs(t,je._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new je(t.vectorValues);throw new G(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}je._jsonSchemaVersion="firestore/vectorValue/1.0",je._jsonSchema={type:Ut("string",je._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=/^__.*__$/;class yI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Hs(t,this.data,n,this.fieldTransforms)}}function cp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:e})}}class kl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new kl({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Yi(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(cp(this.Ac)&&_I.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class EI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Eo(t)}Cc(t,n,r,s=!1){return new kl({Ac:t,methodName:n,Dc:r,path:Jt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TI(e){const t=e._freezeSettings(),n=Eo(e._databaseId);return new EI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vI(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);dp("Data must be an object, but it was:",a,r);const l=hp(r,a);let u,f;if(i.merge)u=new Re(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const T=II(t,m,n);if(!a.contains(T))throw new G(x.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);AI(d,T)||d.push(T)}u=new Re(d),f=a.fieldTransforms.filter((m=>u.covers(m.field)))}else u=null,f=a.fieldTransforms;return new yI(new Ie(l),u,f)}function up(e,t){if(fp(e=Ps(e)))return dp("Unsupported field value:",t,e),hp(e,t);if(e instanceof lp)return(function(r,s){if(!cp(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=up(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Ps(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ct.fromDate(r);return{timestampValue:Wi(s.serializer,i)}}if(r instanceof Ct){const i=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wi(s.serializer,i)}}if(r instanceof Be)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof we)return{bytesValue:Dd(s.serializer,r._byteString)};if(r instanceof Gt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof je)return(function(a,l){return{mapValue:{fields:{[id]:{stringValue:od},[$i]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return _l(l.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${hl(r)}`)})(e,t)}function hp(e,t){const n={};return Zf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jn(e,((r,s)=>{const i=up(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function fp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ct||e instanceof Be||e instanceof we||e instanceof Gt||e instanceof lp||e instanceof je)}function dp(e,t,n){if(!fp(n)||!Yf(n)){const r=hl(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function II(e,t,n){if((t=Ps(t))instanceof Ml)return t._internalPath;if(typeof t=="string")return pp(e,t);throw Yi("Field path arguments must be of type string or ",e,!1,void 0,n)}const wI=new RegExp("[~\\*/\\[\\]]");function pp(e,t,n){if(t.search(wI)>=0)throw Yi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ml(...t.split("."))._internalPath}catch{throw Yi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Yi(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(x.INVALID_ARGUMENT,l+e+u)}function AI(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new bI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bI extends mp{data(){return super.data()}}function gp(e,t){return typeof t=="string"?pp(e,t):t instanceof Ml?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new G(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RI{convertValue(t,n="none"){switch(Pn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Cn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Jn(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var r,s,i;const n=(i=(s=(r=t.fields)==null?void 0:r[$i].arrayValue)==null?void 0:s.values)==null?void 0:i.map((a=>Ot(a.doubleValue)));return new je(n)}convertGeoPoint(t){return new Be(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=ho(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Os(t));default:return null}}convertTimestamp(t){const n=Rn(t);return new Ct(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rt.fromString(t);_t(Ld(r),9688,{name:t});const s=new Ms(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||tn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class pi{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ar extends mp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(gp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ar._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ar._jsonSchema={type:Ut("string",Ar._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class bi extends Ar{data(t={}){return super.data(t)}}class br{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new pi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new bi(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const u=new bi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new pi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const u=new bi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new pi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:PI(l.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=br._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ul.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function PI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}br._jsonSchemaVersion="firestore/querySnapshot/1.0",br._jsonSchema={type:Ut("string",br._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class VI extends RI{constructor(t){super(),this.firestore=t}convertBytes(t){return new we(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function DI(e){e=xs(e,wo);const t=xs(e.firestore,Ol),n=ap(t),r=new VI(t);return SI(e._query),hI(n,e._query).then((s=>new br(t,r,e,s)))}function xI(e,t,n){e=xs(e,Gt);const r=xs(e.firestore,Ol),s=CI(e.converter,t);return NI(r,[vI(TI(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Xe.none())])}function NI(e,t){return(function(r,s){const i=new In;return r.asyncQueue.enqueueAndForget((async()=>Yv(await cI(r),s,i))),i.promise})(ap(e),t)}(function(t,n=!0){(function(s){Mr=s})(tE),Ui(new Vs("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ol(new pE(r.getProvider("auth-internal")),new _E(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ms(f.options.projectId,d)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Ir(yu,Eu,t),Ir(yu,Eu,"esm2020")})();var OI="firebase",MI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(OI,MI,"app");const kI={apiKey:"AIzaSyCyaNb2K79ZRWJ1QMuGhc3AcCi4L3d6zdQ",authDomain:"harrison-waldon-assignment-4.firebaseapp.com",projectId:"harrison-waldon-assignment-4",storageBucket:"harrison-waldon-assignment-4.firebasestorage.app",messagingSenderId:"564498396828",appId:"1:564498396828:web:30d3cc1cc81b2685b01f59",measurementId:"G-7BYZ1KT0TC"},LI=Uf(kI),dh=mI(LI),Gs=g_("BeverageStore",{state:()=>({temps:["Cold","Hot"],currentTemp:"Cold",bases:[],currentBase:null,creamers:[],currentCreamer:null,syrups:[],currentSyrup:null,savedBeverages:[]}),actions:{async init(){const e=async t=>(await DI(dI(dh,t))).docs.map(r=>({id:r.id,...r.data()}));this.bases=await e("bases"),this.creamers=await e("creamers"),this.syrups=await e("syrups"),this.currentBase=this.bases[0]||null,this.currentCreamer=this.creamers[0]||null,this.currentSyrup=this.syrups[0]||null},async makeBeverage(e){const t={name:e,config:{temp:this.currentTemp,baseId:this.currentBase.id,creamerId:this.currentCreamer.id,syrupId:this.currentSyrup.id}},n=this.savedBeverages.findIndex(r=>r.name===e);n!==-1?this.savedBeverages[n]=t:this.savedBeverages.push(t),await xI(pI(dh,"beverages",e),t)},showBeverage(e){const t=this.savedBeverages.find(a=>a.name===e);if(!t)return;const{temp:n,baseId:r,creamerId:s,syrupId:i}=t.config;this.currentTemp=n,this.currentBase=this.bases.find(a=>a.id===r)||this.bases[0],this.currentCreamer=this.creamers.find(a=>a.id===s)||this.creamers[0],this.currentSyrup=this.syrups.find(a=>a.id===i)||this.syrups[0]}},persist:!0}),FI=js({__name:"Syrup",setup(e){const t=Gs();return(n,r)=>(Tt(),Nt("div",{class:"syrup",key:wt(t).currentSyrup.id,style:Nr({backgroundColor:wt(t).currentSyrup.color})},null,4))}}),UI=Yn(FI,[["__scopeId","data-v-5c0fee87"]]),BI=js({__name:"Base",setup(e){const t=Gs();return(n,r)=>(Tt(),Nt("div",{class:"baseBeverage",key:wt(t).currentBase.id,style:Nr({backgroundColor:wt(t).currentBase.color,animation:"pour-tea 2s"})},null,4))}}),ur=Yn(BI,[["__scopeId","data-v-12ccc158"]]),jI={class:"froth"},$I=js({__name:"Creamer",setup(e){const t=Gs();return(n,r)=>(Tt(),Nt("div",jI,[(Tt(),Nt(Mt,null,mn(5,s=>xt("div",{key:s,class:"foam",style:Nr({backgroundColor:wt(t).currentCreamer.color})},null,4)),64))]))}}),ph=Yn($I,[["__scopeId","data-v-9662e68c"]]),qI={},HI={id:"steam"},zI={class:"stream"};function KI(e,t){return Tt(),Nt("div",HI,[(Tt(),Nt(Mt,null,mn(3,()=>xt("div",zI)),64))])}const WI=Yn(qI,[["render",KI]]),GI={},QI={id:"condensation"},XI={class:"flake"};function YI(e,t){return Tt(),Nt("div",QI,[(Tt(),Nt(Mt,null,mn(3,()=>xt("div",XI)),64))])}const JI=Yn(GI,[["render",YI]]),ZI=js({__name:"Beverage",props:{isIced:{type:Boolean}},setup(e){const t=Gs();return(n,r)=>(Tt(),dn(C_,null,{default:Se(()=>[e.isIced?(Tt(),dn(JI,{key:0})):(Tt(),dn(WI,{key:1})),wt(t).currentSyrup.id==="s1"&&wt(t).currentCreamer.id==="c1"?(Tt(),dn(Qo,{key:2},{top:Se(()=>[$t(ur)]),mid:Se(()=>[$t(ur)]),bottom:Se(()=>[$t(ur)]),_:1})):wt(t).currentSyrup.id==="s1"&&wt(t).currentCreamer.id!=="c1"?(Tt(),dn(Qo,{key:3},{top:Se(()=>[$t(ph)]),mid:Se(()=>[$t(ur)]),bottom:Se(()=>[$t(ur)]),_:1})):(Tt(),dn(Qo,{key:4},{top:Se(()=>[$t(ph)]),mid:Se(()=>[$t(UI)]),bottom:Se(()=>[$t(ur)]),_:1}))]),_:1}))}}),tw=["id","value"],ew=["id","value"],nw=["id","value"],rw=["id","value"],sw={id:"beverage-container",style:{"margin-top":"20px"}},iw=["onClick"],ow=js({__name:"App",setup(e){const t=Gs(),n=Ja("");return(r,s)=>(Tt(),Nt(Mt,null,[xt("div",null,[$t(ZI,{isIced:wt(t).currentTemp==="Cold"},null,8,["isIced"]),xt("ul",null,[xt("li",null,[(Tt(!0),Nt(Mt,null,mn(wt(t).temps,i=>(Tt(),Nt("label",{key:i},[ss(xt("input",{type:"radio",name:"temperature",id:`r${i}`,value:i,"onUpdate:modelValue":s[0]||(s[0]=a=>wt(t).currentTemp=a)},null,8,tw),[[li,wt(t).currentTemp]]),as(" "+hr(i),1)]))),128))])]),xt("ul",null,[xt("li",null,[(Tt(!0),Nt(Mt,null,mn(wt(t).bases,i=>(Tt(),Nt("label",{key:i.id},[ss(xt("input",{type:"radio",name:"base",id:`r${i.id}`,value:i,"onUpdate:modelValue":s[1]||(s[1]=a=>wt(t).currentBase=a)},null,8,ew),[[li,wt(t).currentBase]]),as(" "+hr(i.name),1)]))),128))])]),xt("ul",null,[xt("li",null,[(Tt(!0),Nt(Mt,null,mn(wt(t).creamers,i=>(Tt(),Nt("label",{key:i.id},[ss(xt("input",{type:"radio",name:"creamer",id:`r${i.id}`,value:i,"onUpdate:modelValue":s[2]||(s[2]=a=>wt(t).currentCreamer=a)},null,8,nw),[[li,wt(t).currentCreamer]]),as(" "+hr(i.name),1)]))),128))])]),xt("ul",null,[xt("li",null,[(Tt(!0),Nt(Mt,null,mn(wt(t).syrups,i=>(Tt(),Nt("label",{key:i.id},[ss(xt("input",{type:"radio",name:"syrup",id:`r${i.id}`,value:i,"onUpdate:modelValue":s[3]||(s[3]=a=>wt(t).currentSyrup=a)},null,8,rw),[[li,wt(t).currentSyrup]]),as(" "+hr(i.name),1)]))),128))])]),ss(xt("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=i=>n.value=i),placeholder:"Beverage Name"},null,512),[[r_,n.value]]),xt("button",{onClick:s[5]||(s[5]=i=>wt(t).makeBeverage(n.value))}," Make Beverage")]),xt("div",sw,[xt("ul",null,[(Tt(!0),Nt(Mt,null,mn(wt(t).savedBeverages,i=>(Tt(),Nt("li",{key:i.name,onClick:a=>wt(t).showBeverage(i.name),style:{cursor:"pointer"}}," > "+hr(i.name),9,iw))),128))])])],64))}}),_p=u_();_p.use(v_);a_(ow).use(_p).mount("#app");
